import{r as t,g as a,s as e,i as s,W as i,X as o,b as n,d as l,a as c,h as r,P as u,Y as d,f as h,Z as g,n as f,_ as m,N as p,m as S,w as D,o as b,p as w,q as y,u as _,A as C,B as U,F as k,x as v,y as A,z as T,O as x,C as M,E as F,H as I,J as G}from"./index-BrYrmhwU.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";const O={clientId:"21680db9b1362913357c",baseUrl:"https://21680db9b1362913357c.myminapp.com/hserve/v2.2",tableNames:{SearchWord_Version:"SearchWord_Version",Guess_Version:"Guess_Version"}},J={domestic:{name:"å›½å†…æº",mainUrl:"",searchUrl:""},github:{name:"GitHubæº",characterUrl:"https://raw.githubusercontent.com/awadwd/ArknightsAuthenticationAssistant/refs/heads/main/resource/Box_Id.json",warning:"ä»…æ”¯æŒåŸºç¡€è§’è‰²æ•°æ®ï¼Œå¯èƒ½æ— æ³•æ˜¾ç¤ºåˆ†ç›’ä¿¡æ¯ã€å¸‚ä»·ã€å¤´åƒåŠçƒ­åº¦æ ‡è®°"},local:{name:"æœ¬åœ°æ•°æ®",desc:"ä½¿ç”¨å·²ä¸‹è½½çš„æœ¬åœ°æ•°æ®"},custom:{name:"è‡ªå®šä¹‰æ•°æ®",desc:"ä½¿ç”¨ä¸Šä¼ çš„è‡ªå®šä¹‰æ•°æ®"}},E="https://raw.gitcode.com/huangjinzhou1/ArknightsAuthorization_Series/blobs/11e970795ce8a6e94ac5baa0d5d0458c4103c7e2/searchWord.json";const P=N({data:()=>({localUpdateTime:"",cloudUpdateTime:"",currentVersion:"",dataCount:0,localDataSize:"",enableGuessData:!1,guessDataStatusMessage:"",guessDataCount:0,enableEnglishSearch:!1,enableJapaneseSearch:!1,enableNicknameSearch:!1,searchDataStatusMessage:"",searchWordCount:0,customWordsCount:0,searchDataUrl:E,showMarketPrice:!1,dataSource:"domestic",dataSourceOptions:[{value:"domestic",label:"å›½å†…æºï¼ˆæ¨èï¼‰",desc:"é€Ÿåº¦å¿«ï¼Œç¨³å®šæ€§å¥½ï¼Œæ”¯æŒå…¨éƒ¨åŠŸèƒ½",warning:""},{value:"github",label:"GitHubæº",desc:"å®˜æ–¹æ¸¸æˆæ•°æ®ï¼Œä»…åŸºç¡€è§’è‰²ä¿¡æ¯",warning:"å¯èƒ½ä¸æ”¯æŒåˆ†ç›’ã€å¸‚ä»·ã€å¤´åƒã€çƒ­åº¦æ ‡è®°ç­‰åŠŸèƒ½"},{value:"local",label:"æœ¬åœ°æ•°æ®",desc:"ä½¿ç”¨å·²ä¸‹è½½çš„æœ¬åœ°æ•°æ®ï¼Œæ— éœ€ç½‘ç»œ",warning:"éœ€å…ˆä¸‹è½½æ•°æ®"},{value:"custom",label:"è‡ªå®šä¹‰æ•°æ®",desc:"ä¸Šä¼ è‡ªå®šä¹‰JSONæ•°æ®",warning:"éœ€è‡ªè¡ŒéªŒè¯æ•°æ®æ ¼å¼"}],githubCharactersCount:0,githubDataStatusMessage:"",isDownloading:!1,downloadProgress:0,downloadTask:null,isDownloadCancelled:!1,customDataInfo:null,isUploading:!1,uploadProgress:0,showValidationModal:!1,validationResult:{valid:!1,message:"",details:[]},tempCustomData:null,hasDomesticData:!1,unifiedData:null,unifiedDataVersion:"",unifiedUpdateTime:"",enableAutoUpdate:!1,autoUpdateStatusMessage:"",lastAutoUpdateTime:"",showAutoUpdateModal:!1,autoUpdateConfig:{enabled:!1,lastCheckTime:"",wifiOnly:!0,autoDownload:!0,checkFrequency:24,checkInterval:864e5},updateFrequencies:["æ¯æ¬¡å¯åŠ¨æ—¶æ£€æŸ¥","æ¯12å°æ—¶æ£€æŸ¥ä¸€æ¬¡","æ¯24å°æ—¶æ£€æŸ¥ä¸€æ¬¡","æ¯48å°æ—¶æ£€æŸ¥ä¸€æ¬¡","æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡"],updateFrequencyIndex:2,updateFrequencyValues:[0,432e5,864e5,1728e5,6048e5]}),computed:{guessDataStatusClass(){return this.guessDataStatusMessage.includes("æˆåŠŸ")?"status-success":this.guessDataStatusMessage.includes("å¤±è´¥")||this.guessDataStatusMessage.includes("é”™è¯¯")?"status-error":"status-loading"},searchDataStatusClass(){return this.searchDataStatusMessage.includes("æˆåŠŸ")?"status-success":this.searchDataStatusMessage.includes("å¤±è´¥")||this.searchDataStatusMessage.includes("é”™è¯¯")?"status-error":"status-loading"},autoUpdateStatusClass(){return this.autoUpdateStatusMessage.includes("å·²å¼€å¯")||this.autoUpdateStatusMessage.includes("æˆåŠŸ")?"status-success":this.autoUpdateStatusMessage.includes("å¤±è´¥")||this.autoUpdateStatusMessage.includes("é”™è¯¯")?"status-error":this.autoUpdateStatusMessage.includes("æ£€æŸ¥ä¸­")?"status-loading":""},enabledSearchCount(){let t=0;return this.enableEnglishSearch&&t++,this.enableJapaneseSearch&&t++,this.enableNicknameSearch&&t++,t}},onLoad(){this.loadDataSourceSetting(),this.loadDataInfo(),this.loadMarketPriceSetting(),this.calculateDataSize(),this.loadGuessDataSetting(),this.loadSearchSettings(),this.checkDomesticData(),this.loadCustomDataInfo(),this.unifyDataStorage(),this.loadAutoUpdateSetting(),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onUnload(){this.downloadTask&&this.downloadTask.abort()},onShareAppMessage:()=>({title:"æ–¹èˆŸé€šè¡Œè¯è°·å­æŸ¥è¯¢å·¥å…·-è®¾ç½®",path:"/packageA/Setting/Setting",imageUrl:""}),onShareTimeline:()=>({title:"æ–¹èˆŸé€šè¡Œè¯è°·å­æŸ¥è¯¢å·¥å…·-è®¾ç½®",imageUrl:""}),methods:{async knowCloudRequest(a,e={},s=0){if(s>3)throw console.error("çŸ¥æ™“äº‘è¯·æ±‚é‡è¯•æ¬¡æ•°è¿‡å¤š"),new Error("çŸ¥æ™“äº‘è¯·æ±‚é‡è¯•æ¬¡æ•°è¿‡å¤š");try{const s=O.tableNames[a];if(!s)throw new Error(`æœªæ‰¾åˆ°è¡¨ ${a} çš„é…ç½®`);let i=`${O.baseUrl}/table/${s}/record/`;if(e.data){const t=[];Object.keys(e.data).forEach((a=>{t.push(`${a}=${encodeURIComponent(e.data[a])}`)})),t.length>0&&(i+=`?${t.join("&")}`)}const o={url:i,method:e.method||"GET",header:{"X-Hydrogen-Client-ID":O.clientId,"Content-Type":"application/json"},timeout:15e3,...e};e.header&&Object.assign(o.header,e.header),console.log("å‘é€çŸ¥æ™“äº‘è¯·æ±‚:",o.url);const n=await t(o);if(console.log("çŸ¥æ™“äº‘å“åº”çŠ¶æ€:",n.statusCode),200===n.statusCode)return n.data;throw console.error("çŸ¥æ™“äº‘è¯·æ±‚é”™è¯¯:",n.statusCode,n.data),new Error(`è¯·æ±‚å¤±è´¥: ${n.statusCode}`)}catch(i){if(console.error(`çŸ¥æ™“äº‘è¯·æ±‚å¤±è´¥ (${a}):`,i),s<3)return console.log(`ç¬¬${s+1}æ¬¡é‡è¯•...`),await this.knowCloudRequest(a,e,s+1);throw i}},async getSearchDataUrlFromMinapp(){try{const t=await this.knowCloudRequest("SearchWord_Version",{data:{limit:1,offset:0,orderby:"-created_at"}});if(console.log("çŸ¥æ™“äº‘æœç´¢è¯ç‰ˆæœ¬ä¿¡æ¯å“åº”:",t),t&&t.objects&&t.objects.length>0){const a=t.objects[0];console.log("æœç´¢è¯ç‰ˆæœ¬æ•°æ®:",a);let e=a.url||"";return e||(console.warn("çŸ¥æ™“äº‘è¿”å›çš„URLä¸ºç©ºï¼Œä½¿ç”¨å›ºå®šURL"),e=E),{url:e,version:a.version||a.Version||"",updateTime:a.updated_at||a.created_at||""}}return console.warn("çŸ¥æ™“äº‘æœªæ‰¾åˆ°æœç´¢è¯æ•°æ®ï¼Œä½¿ç”¨å›ºå®šURL"),{url:E,version:"å›ºå®šç‰ˆæœ¬",updateTime:(new Date).toISOString()}}catch(t){return console.error("ä»çŸ¥æ™“äº‘è·å–æœç´¢è¯URLå¤±è´¥:",t),console.warn("çŸ¥æ™“äº‘è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨å›ºå®šURL"),{url:E,version:"å›ºå®šç‰ˆæœ¬",updateTime:(new Date).toISOString()}}},async getGuessDataUrlFromMinapp(t="gitcode"){try{const a=await this.knowCloudRequest("Guess_Version",{data:{where:JSON.stringify({type:t}),limit:1,offset:0,orderby:"-created_at"}});if(console.log(`çŸ¥æ™“äº‘é¢„æµ‹ç‰ˆæœ¬ä¿¡æ¯å“åº” (type=${t}):`,a),a&&a.objects&&a.objects.length>0){const e=a.objects[0];console.log("é¢„æµ‹ç‰ˆæœ¬æ•°æ®:",e);let s=e.url||"";return s||(console.warn(`çŸ¥æ™“äº‘è¿”å›çš„URLä¸ºç©º (type=${t})ï¼Œä½¿ç”¨å¤‡ç”¨URL`),s=FALLBACK_GUESS_URL),{url:s,version:e.version||e.Version||"",updateTime:e.updated_at||e.created_at||""}}return console.warn(`çŸ¥æ™“äº‘æœªæ‰¾åˆ°é¢„æµ‹æ•°æ® (type=${t})ï¼Œä½¿ç”¨å¤‡ç”¨URL`),{url:FALLBACK_GUESS_URL,version:"å›ºå®šç‰ˆæœ¬",updateTime:(new Date).toISOString()}}catch(a){return console.error(`ä»çŸ¥æ™“äº‘è·å–é¢„æµ‹URLå¤±è´¥ (type=${t}):`,a),console.warn("çŸ¥æ™“äº‘è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨URL"),{url:FALLBACK_GUESS_URL,version:"å›ºå®šç‰ˆæœ¬",updateTime:(new Date).toISOString()}}},unifyDataStorage(){var t;switch(this.dataSource){case"domestic":const e=a("arknightsData");e&&(this.unifiedData=e,this.unifiedDataVersion=a("dataVersion")||"æœªçŸ¥ç‰ˆæœ¬",this.unifiedUpdateTime=a("localUpdateTime")||"");break;case"github":const s=a("githubCharacters");s&&(this.unifiedData=s,this.unifiedDataVersion=a("githubDataVersion")||"GitHubç‰ˆæœ¬",this.unifiedUpdateTime=(new Date).toISOString());break;case"custom":const i=a("customData");i&&(this.unifiedData=i,this.unifiedDataVersion="è‡ªå®šä¹‰æ•°æ®ç‰ˆæœ¬",this.unifiedUpdateTime=(null==(t=a("customDataInfo"))?void 0:t.uploadTime)||"");break;case"local":const o=a("arknightsData");o&&(this.unifiedData=o,this.unifiedDataVersion=a("dataVersion")||"æœ¬åœ°ç‰ˆæœ¬",this.unifiedUpdateTime=a("localUpdateTime")||"")}this.unifiedData&&(e("currentData",this.unifiedData),e("currentDataVersion",this.unifiedDataVersion),e("currentUpdateTime",this.unifiedUpdateTime),e("currentDataSource",this.dataSource))},clearAllDownloadedFiles(){try{if(["arknightsData","githubCharacters","customData","currentData","currentDataVersion","currentUpdateTime","searchWords","enableEnglishSearch","enableJapaneseSearch","enableNicknameSearch","customSearchWords","guessData","enableGuessData","dataVersion","githubDataVersion","localUpdateTime","cloudUpdateTime","customDataInfo","dataUrl","searchDataUrl","autoUpdateSetting"].forEach((t=>{s(t)})),"undefined"!=typeof wx)try{wx.getFileSystemManager();const t=i?i():null;t&&t.fileList&&t.fileList.forEach((t=>{o({filePath:t.filePath,fail:t=>{console.log("åˆ é™¤æ–‡ä»¶å¤±è´¥:",t)}})}))}catch(t){console.log("æ¸…é™¤æ–‡ä»¶å¤±è´¥:",t)}return!0}catch(a){return console.error("æ¸…é™¤æ•°æ®å¤±è´¥:",a),!1}},resetAllDataStates(){this.localUpdateTime="",this.cloudUpdateTime="",this.currentVersion="",this.dataCount=0,this.localDataSize="æ— æ•°æ®",this.enableGuessData=!1,this.guessDataCount=0,this.guessDataStatusMessage="",this.enableEnglishSearch=!1,this.enableJapaneseSearch=!1,this.enableNicknameSearch=!1,this.searchWordCount=0,this.customWordsCount=0,this.searchDataStatusMessage="",this.githubCharactersCount=0,this.githubDataStatusMessage="",this.customDataInfo=null,this.hasDomesticData=!1,this.unifiedData=null,this.unifiedDataVersion="",this.unifiedUpdateTime="",this.enableAutoUpdate=!1,this.autoUpdateStatusMessage="",this.lastAutoUpdateTime=""},checkDomesticData(){try{const t=a("arknightsData");this.hasDomesticData=t&&Array.isArray(t)&&t.length>0}catch(t){console.error("æ£€æŸ¥å›½å†…æºæ•°æ®å¤±è´¥:",t),this.hasDomesticData=!1}},loadCustomDataInfo(){try{const t=a("customDataInfo");t&&(this.customDataInfo=t)}catch(t){console.error("åŠ è½½è‡ªå®šä¹‰æ•°æ®ä¿¡æ¯å¤±è´¥:",t)}},loadDataSourceSetting(){try{const t=a("dataSource");t&&(this.dataSource=t),"github"===this.dataSource&&this.loadGithubDataInfo()}catch(t){console.error("åŠ è½½æ•°æ®æºè®¾ç½®å¤±è´¥:",t)}},loadGithubDataInfo(){try{const t=a("githubCharacters");t&&Array.isArray(t)&&(this.githubCharactersCount=t.length)}catch(t){console.error("åŠ è½½GitHubæ•°æ®ä¿¡æ¯å¤±è´¥:",t)}},getCurrentDataSourceName(){var t;return(null==(t=J[this.dataSource])?void 0:t.name)||"æœªçŸ¥"},async selectDataSource(t){if(this.isDownloading||this.isUploading)n({title:"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™",icon:"none"});else if(this.dataSource!==t){if("local"===t){const e=a("arknightsData");return e&&0!==e.length?void this.confirmSwitchDataSource(t):void l({title:"æç¤º",content:"æœ¬åœ°æš‚æ— æ•°æ®ï¼Œè¯·å…ˆä¸‹è½½æ•°æ®åå†é€‰æ‹©æœ¬åœ°æ•°æ®æº",showCancel:!1})}if("custom"===t){const e=a("customData");return e&&0!==e.length?void this.confirmSwitchDataSource(t):void l({title:"æç¤º",content:"æš‚æ— è‡ªå®šä¹‰æ•°æ®ï¼Œè¯·å…ˆä¸Šä¼ JSONæ–‡ä»¶",confirmText:"ä¸Šä¼ æ•°æ®",cancelText:"å–æ¶ˆ",success:t=>{t.confirm&&this.uploadCustomData()}})}"domestic"!==t?"github"===t&&this.confirmSwitchToGithub(t):this.confirmSwitchDataSource(t)}},async confirmSwitchToGithub(t){l({title:"é‡è¦æç¤º",content:"GitHubæºä»…æä¾›åŸºç¡€è§’è‰²æ•°æ®ï¼Œæ— æ³•æ˜¾ç¤ºåˆ†ç›’ä¿¡æ¯ã€å¸‚ä»·ä¿¡æ¯ã€è§’è‰²å¤´åƒåŠçƒ­åº¦æ ‡è®°ç­‰ç‰¹æ®ŠåŠŸèƒ½ã€‚åˆ‡æ¢åå°†æ¸…é™¤æ‰€æœ‰å·²ä¸‹è½½æ•°æ®ã€‚æ˜¯å¦ç»§ç»­ä½¿ç”¨GitHubæºï¼Ÿ",confirmText:"ç»§ç»­ä½¿ç”¨",cancelText:"å–æ¶ˆ",success:a=>{a.confirm&&this.startGithubDownload(t)}})},async startGithubDownload(t){this.clearAllDownloadedFiles(),this.isDownloading=!0,this.downloadProgress=0,this.isDownloadCancelled=!1,c({title:"æ­£åœ¨ä¸‹è½½GitHubæ•°æ®...",mask:!0});try{await this.downloadGithubData()&&!this.isDownloadCancelled?(this.dataSource=t,e("dataSource",t),this.unifyDataStorage(),r(),n({title:"å·²æˆåŠŸåˆ‡æ¢åˆ°GitHubæº",icon:"success",duration:2e3}),this.loadDataInfo()):this.isDownloadCancelled||(r(),l({title:"ä¸‹è½½å¤±è´¥",content:"GitHubæ•°æ®ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•",showCancel:!1}))}catch(a){console.error("ä¸‹è½½GitHubæ•°æ®å¤±è´¥:",a),this.isDownloadCancelled||(r(),l({title:"ä¸‹è½½å¤±è´¥",content:"GitHubæ•°æ®ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥",showCancel:!1}))}finally{this.isDownloading=!1,this.downloadProgress=0}},confirmSwitchDataSource(t){this.clearAllDownloadedFiles(),this.dataSource=t,e("dataSource",t);let a="";"domestic"===t?(a="å·²åˆ‡æ¢è‡³å›½å†…æºï¼Œä¸‹æ¬¡ä¸‹è½½å°†ä½¿ç”¨å›½å†…é•œåƒ",this.unifiedData=null,this.unifiedDataVersion="",this.unifiedUpdateTime="",this.dataCount=0,this.localUpdateTime="",this.cloudUpdateTime="",this.currentVersion=""):"local"===t?a="å·²åˆ‡æ¢è‡³æœ¬åœ°æ•°æ®ï¼Œå°†ä½¿ç”¨å·²ä¸‹è½½çš„æœ¬åœ°æ•°æ®":"custom"===t&&(a="å·²åˆ‡æ¢è‡³è‡ªå®šä¹‰æ•°æ®"),n({title:a,icon:"success",duration:2e3}),setTimeout((()=>{this.unifyDataStorage(),this.loadDataInfo()}),500)},cancelDownload(){this.isDownloadCancelled=!0,this.downloadTask&&this.downloadTask.abort(),this.isDownloading=!1,this.downloadProgress=0,r(),n({title:"å·²å–æ¶ˆä¸‹è½½",icon:"none"})},uploadCustomData(){this.isUploading||this.isDownloading||u({itemList:["é€‰æ‹©JSONæ–‡ä»¶","ç²˜è´´JSONæ•°æ®"],success:t=>{0===t.tapIndex?this.selectJsonFile():this.inputJsonData()}})},selectJsonFile(){wx.chooseMessageFile({count:1,type:"file",extension:[".json"],success:t=>{const a=t.tempFiles[0];a.size>10485760?n({title:"æ–‡ä»¶å¤ªå¤§ï¼Œè¯·é€‰æ‹©å°äº10MBçš„æ–‡ä»¶",icon:"none"}):this.processJsonFile(a.path)},fail:t=>{console.error("é€‰æ‹©æ–‡ä»¶å¤±è´¥:",t),n({title:"é€‰æ‹©æ–‡ä»¶å¤±è´¥",icon:"none"})}})},inputJsonData(){l({title:"è¾“å…¥JSONæ•°æ®",editable:!0,placeholderText:"è¯·åœ¨æ­¤å¤„ç²˜è´´JSONæ•°æ®...",confirmText:"éªŒè¯",cancelText:"å–æ¶ˆ",success:t=>{t.confirm&&t.content&&this.processJsonString(t.content)}})},async processJsonFile(t){this.isUploading=!0,this.uploadProgress=30;try{const a=await this.readFile(t);this.uploadProgress=60,await this.processJsonString(a)}catch(a){console.error("å¤„ç†JSONæ–‡ä»¶å¤±è´¥:",a),n({title:"è¯»å–æ–‡ä»¶å¤±è´¥",icon:"none"})}finally{this.isUploading=!1,this.uploadProgress=0}},readFile:t=>new Promise(((a,e)=>{uni.getFileSystemManager().readFile({filePath:t,encoding:"utf8",success:t=>{a(t.data)},fail:t=>{e(t)}})})),async processJsonString(t){this.isUploading=!0,this.uploadProgress=80;try{let e;try{e=JSON.parse(t)}catch(a){throw n({title:"JSONæ ¼å¼é”™è¯¯",icon:"none"}),new Error("JSONè§£æå¤±è´¥")}this.uploadProgress=90;const s=this.validateCustomData(e);this.uploadProgress=100,this.tempCustomData=e,this.validationResult=s,this.showValidationModal=!0}catch(e){console.error("å¤„ç†JSONæ•°æ®å¤±è´¥:",e),n({title:"æ•°æ®å¤„ç†å¤±è´¥",icon:"none"})}finally{this.isUploading=!1,this.uploadProgress=0}},validateCustomData(t){const a={valid:!1,message:"",details:[]};if(!Array.isArray(t))return a.message="æ•°æ®æ ¼å¼é”™è¯¯ï¼šæ•°æ®åº”ä¸ºæ•°ç»„æ ¼å¼",a.details.push("âŒ æ•°æ®åº”ä¸ºæ•°ç»„æ ¼å¼"),a;if(0===t.length)return a.message="æ•°æ®ä¸ºç©ºï¼šæœªæ‰¾åˆ°ä»»ä½•ç›’å·æ•°æ®",a.details.push("âŒ æ•°æ®ä¸ºç©ºï¼Œæœªæ‰¾åˆ°ä»»ä½•ç›’å·"),a;a.details.push(`âœ… æ•°æ®æ ¼å¼æ­£ç¡®ï¼Œå…± ${t.length} ä¸ªå…ƒç´ `);const e=t[0],s=["Box_id"],i=["character1","character2","character3","character4","character5","character6"];for(const d of s)void 0===e[d]?a.details.push(`âŒ ç¼ºå°‘å¿…éœ€å­—æ®µ: ${d}`):a.details.push(`âœ… åŒ…å«å¿…éœ€å­—æ®µ: ${d}`);let o=!1;for(const d of i)if(void 0!==e[d]){o=!0,a.details.push(`âœ… åŒ…å«å¹²å‘˜å­—æ®µ: ${d}`);break}o||a.details.push("âŒ æœªæ‰¾åˆ°ä»»ä½•å¹²å‘˜å­—æ®µ (character1-character6)");let n=!0;t.forEach(((t,e)=>{t.Box_id&&"string"!=typeof t.Box_id&&"number"!=typeof t.Box_id&&(a.details.push(`âŒ ç¬¬ ${e+1} ä¸ªå…ƒç´  Box_id ç±»å‹é”™è¯¯`),n=!1)})),n&&a.details.push("âœ… æ‰€æœ‰Box_idå­—æ®µç±»å‹æ­£ç¡®");const l=new Set;let c=!1;t.forEach((t=>{t.Box_id&&(l.has(String(t.Box_id))&&(c=!0),l.add(String(t.Box_id)))})),c?a.details.push("âš ï¸ å‘ç°é‡å¤çš„Box_id"):a.details.push("âœ… æ‰€æœ‰Box_idå”¯ä¸€");let r=0;t.forEach((t=>{for(let a=1;a<=6;a++){const e=`character${a}`;t[e]&&t[e].name&&r++}})),a.details.push(`ğŸ“Š å…±åŒ…å« ${r} ä¸ªå¹²å‘˜æ¡ç›®`);const u=s.every((t=>void 0!==e[t]))&&o&&n;return a.valid=u,a.message=u?`æ•°æ®éªŒè¯é€šè¿‡ (${t.length} ä¸ªç›’å·, ${r} ä¸ªå¹²å‘˜)`:"æ•°æ®æ ¼å¼ä¸å®Œæ•´ï¼Œå¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨",a},closeValidationModal(){this.showValidationModal=!1,this.tempCustomData=null,this.validationResult={valid:!1,message:"",details:[]}},confirmUseCustomData(){if(this.validationResult.valid&&this.tempCustomData)try{this.clearAllDownloadedFiles(),e("customData",this.tempCustomData);const t=this.calculateDataSizeString(this.tempCustomData),a=new Date,s=`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`;this.customDataInfo={source:"è‡ªå®šä¹‰ä¸Šä¼ ",uploadTime:s,size:t,boxCount:this.tempCustomData.length,validation:this.validationResult},e("customDataInfo",this.customDataInfo),this.dataSource="custom",e("dataSource","custom"),this.dataCount=this.tempCustomData.length,this.unifyDataStorage(),this.closeValidationModal(),n({title:"è‡ªå®šä¹‰æ•°æ®ä¸Šä¼ æˆåŠŸ",icon:"success",duration:2e3}),this.loadDataInfo()}catch(t){console.error("ä¿å­˜è‡ªå®šä¹‰æ•°æ®å¤±è´¥:",t),n({title:"ä¿å­˜æ•°æ®å¤±è´¥",icon:"none"})}},calculateDataSizeString(t){try{const a=JSON.stringify(t);return`${(a.length/1024).toFixed(2)} KB`}catch(a){return"æœªçŸ¥"}},exportToLocal(){this.hasDomesticData?u({itemList:["ä¿å­˜ä¸ºJSONæ–‡ä»¶","åˆ†äº«æ•°æ®ç»™å¥½å‹"],success:t=>{0===t.tapIndex?this.saveDataAsJsonFile():1===t.tapIndex&&this.shareDataFile()}}):n({title:"æš‚æ— å›½å†…æºæ•°æ®",icon:"none"})},saveDataAsJsonFile(){try{const t=this.unifiedData||a("arknightsData"),e=this.unifiedDataVersion||a("dataVersion")||"æœªçŸ¥ç‰ˆæœ¬";if(!t||!Array.isArray(t))return void n({title:"å¯¼å‡ºå¤±è´¥ï¼šæ•°æ®ä¸å­˜åœ¨",icon:"none"});c({title:"æ­£åœ¨ç”Ÿæˆæ–‡ä»¶...",mask:!0});const s={version:e,exportTime:(new Date).toISOString(),exportType:"æ–¹èˆŸå¹²å‘˜æ•°æ®",dataSource:this.dataSource,dataCount:t.length,data:t},i=JSON.stringify(s,null,2),o=`arknights-data-${Date.now()}.json`;this.saveJsonToFile(i,o)}catch(t){console.error("å¯¼å‡ºæ•°æ®å¤±è´¥:",t),r(),n({title:"å¯¼å‡ºå¤±è´¥",icon:"none"})}},shareDataFile(){try{const t=a("arknightsData");if(!t||!Array.isArray(t))return void n({title:"æš‚æ— æ•°æ®å¯åˆ†äº«",icon:"none"});c({title:"æ­£åœ¨å‡†å¤‡æ•°æ®...",mask:!0});const e={version:a("dataVersion")||"æœªçŸ¥ç‰ˆæœ¬",exportTime:(new Date).toISOString(),exportType:"æ–¹èˆŸå¹²å‘˜æ•°æ®",dataCount:t.length,data:t.slice(0,100)},s=JSON.stringify(e,null,2),i=`arknights-share-${Date.now()}.json`;this.saveAndShareJsonFile(s,i)}catch(t){r(),console.error("åˆ†äº«æ•°æ®å¤±è´¥:",t),n({title:"åˆ†äº«å¤±è´¥",icon:"none"})}},saveJsonToFile(t,a){if("undefined"!=typeof wx&&wx.getFileSystemManager){const s=wx.getFileSystemManager(),i=`${wx.env.USER_DATA_PATH}/${a}`;try{s.writeFileSync(i,t,"utf8"),this.saveFileToLocal(i)}catch(e){console.error("å†™å…¥æ–‡ä»¶å¤±è´¥:",e),r(),n({title:"ä¿å­˜å¤±è´¥",icon:"none"})}}else this.saveWithUniApi(t,a)},saveFileToLocal(t){d({tempFilePath:t,success:t=>{r();const a=t.savedFilePath;l({title:"ä¿å­˜æˆåŠŸ",content:"æ•°æ®å·²ä¿å­˜ä¸ºJSONæ–‡ä»¶ï¼Œæ˜¯å¦è¦åˆ†äº«ç»™å¥½å‹ï¼Ÿ",confirmText:"åˆ†äº«",cancelText:"æŸ¥çœ‹æ–‡ä»¶",success:t=>{t.confirm?this.shareFileMessage(a):this.openSavedFile(a)}})},fail:a=>{r(),console.error("ä¿å­˜æ–‡ä»¶å¤±è´¥:",a),this.fallbackFileSave(t)}})},saveWithUniApi(t,a){"function"==typeof d?(r(),l({title:"æç¤º",content:"å½“å‰ç¯å¢ƒæ”¯æŒæœ‰é™ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶JSONæ•°æ®",confirmText:"å¤åˆ¶æ•°æ®",cancelText:"å–æ¶ˆ",success:a=>{a.confirm&&h({data:t,success:()=>{n({title:"æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",icon:"success",duration:2e3})}})}})):(r(),this.showJsonData(t))},fallbackFileSave(t){this.openSavedFile(t)},openSavedFile(t){"undefined"!=typeof wx&&g?g({filePath:t,showMenu:!0,success:()=>{console.log("æ‰“å¼€æ–‡æ¡£æˆåŠŸ")},fail:a=>{console.error("æ‰“å¼€æ–‡æ¡£å¤±è´¥:",a),this.showFileInfo(t)}}):this.showFileInfo(t)},showFileInfo(t){const a=t.split("/").pop()||"unknown.json";l({title:"æ–‡ä»¶å·²ä¿å­˜",content:`æ–‡ä»¶å: ${a}\n\næ–‡ä»¶å·²ä¿å­˜åˆ°æœ¬åœ°ï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶ç®¡ç†ä¸­æŸ¥æ‰¾ã€‚`,confirmText:"ç¡®å®š",cancelText:"å¤åˆ¶è·¯å¾„",success:a=>{a.cancel&&h({data:t,success:()=>{n({title:"è·¯å¾„å·²å¤åˆ¶",icon:"success",duration:2e3})}})}})},saveAndShareJsonFile(t,a){if("undefined"!=typeof wx&&wx.getFileSystemManager){const s=wx.getFileSystemManager(),i=`${wx.env.USER_DATA_PATH}/${a}`;try{s.writeFileSync(i,t,"utf8"),this.shareFileMessage(i)}catch(e){console.error("å†™å…¥åˆ†äº«æ–‡ä»¶å¤±è´¥:",e),r(),n({title:"åˆ†äº«å¤±è´¥",icon:"none"})}}else r(),l({title:"åˆ†äº«æ•°æ®",content:"å½“å‰ç¯å¢ƒä¸æ”¯æŒç›´æ¥åˆ†äº«æ–‡ä»¶ï¼Œæ˜¯å¦å¤åˆ¶æ•°æ®æ–‡æœ¬ï¼Ÿ",confirmText:"å¤åˆ¶",cancelText:"å–æ¶ˆ",success:a=>{a.confirm&&h({data:t,success:()=>{n({title:"æ•°æ®å·²å¤åˆ¶",icon:"success",duration:2e3})}})}})},shareFileMessage(t){"undefined"!=typeof wx&&wx.shareFileMessage?(r(),wx.shareFileMessage({filePath:t,success:()=>{n({title:"åˆ†äº«æˆåŠŸ",icon:"success",duration:2e3})},fail:a=>{console.error("åˆ†äº«å¤±è´¥:",a),l({title:"åˆ†äº«å¤±è´¥",content:"æ— æ³•ç›´æ¥åˆ†äº«æ–‡ä»¶ï¼Œè¯·å°è¯•æ‰‹åŠ¨å‘é€æ–‡ä»¶",showCancel:!1,success:()=>{this.showFileInfo(t)}})}})):(r(),this.showFileInfo(t))},showJsonData(t){const a=t.length>1e3?t.substring(0,1e3)+"...":t;l({title:"JSONæ•°æ®",content:a,confirmText:"å¤åˆ¶å…¨éƒ¨",cancelText:"å…³é—­",success:a=>{a.confirm&&h({data:t,success:()=>{n({title:"æ•°æ®å·²å¤åˆ¶",icon:"success",duration:2e3})}})}})},downloadGithubData(){return new Promise((a=>{this.downloadTask=t({url:J.github.characterUrl,method:"GET",timeout:3e4,success:t=>{if(200===t.statusCode){let i=t.data;if("string"==typeof i)try{i=JSON.parse(i)}catch(s){return console.error("GitHubæ•°æ®JSONè§£æå¤±è´¥:",s),void a(!1)}if(Array.isArray(i))e("githubCharacters",i),e("githubDataVersion",(new Date).toISOString()),this.githubCharactersCount=i.length,this.githubDataStatusMessage=`GitHubç›’å·æ•°æ®ä¸‹è½½æˆåŠŸ (${i.length} ä¸ªç›’å·)`,a(!0);else{const t=this.processGithubCharacterData(i);this.githubCharactersCount=t.length,e("githubCharacters",t),e("githubDataVersion",(new Date).toISOString()),this.githubDataStatusMessage=`GitHubè§’è‰²æ•°æ®ä¸‹è½½æˆåŠŸ (${t.length} ä¸ªå¹²å‘˜)`,a(!0)}}else console.error("GitHubæœåŠ¡å™¨é”™è¯¯:",t.statusCode),a(!1)},fail:t=>{console.error("ä¸‹è½½GitHubæ•°æ®å¤±è´¥:",t),a(!1)}}),this.downloadTask.onProgressUpdate=t=>{t.progress>0&&(this.downloadProgress=t.progress)}}))},processGithubCharacterData(t){const a=[];if("object"==typeof t&&!Array.isArray(t)){for(const e in t){const s=t[e];if(!s.name||"trap"===s.profession||"token"===s.profession)continue;const i={id:e,name:s.name,rarity:s.rarity,profession:s.profession,subProfessionId:s.subProfessionId,onlyELITE1:this.isOnlyElite1(s.rarity)};a.push(i)}console.log(`å¤„ç†GitHubè§’è‰²æ•°æ®: åŸå§‹ ${Object.keys(t).length} ä¸ªï¼Œå¤„ç†å ${a.length} ä¸ªå¹²å‘˜`)}return a},isOnlyElite1:t=>["TIER_1","TIER_2","TIER_3"].includes(t),loadDataInfo(){try{const t=a("currentData"),e=a("currentDataVersion"),s=a("currentUpdateTime");if(t)this.unifiedData=t,this.unifiedDataVersion=e||"",this.unifiedUpdateTime=s||"",this.dataCount=Array.isArray(t)?t.length:0;else{const t=a("arknightsData"),e=a("localUpdateTime"),s=a("cloudUpdateTime"),i=a("dataVersion"),o=a("guessData"),n=a("searchWords"),l=a("customSearchWords"),c=a("customData");this.localUpdateTime=e||"",this.cloudUpdateTime=s||"",this.currentVersion=i||"",this.dataCount=t&&Array.isArray(t)?t.length:0,this.guessDataCount=o&&Array.isArray(o)?o.length:0,this.searchWordCount=n&&Array.isArray(n)?n.length:0,this.customWordsCount=l&&Array.isArray(l)?l.length:0,c&&Array.isArray(c)&&"custom"===this.dataSource&&(this.dataCount=c.length)}this.calculateDataSize()}catch(t){console.error("åŠ è½½æ•°æ®ä¿¡æ¯å¤±è´¥:",t)}},loadSearchSettings(){try{const t=a("enableEnglishSearch"),e=a("enableJapaneseSearch"),s=a("enableNicknameSearch");this.enableEnglishSearch="true"===t,this.enableJapaneseSearch="true"===e,this.enableNicknameSearch="true"===s,console.log("åŠ è½½æœç´¢è®¾ç½®:",{english:this.enableEnglishSearch,japanese:this.enableJapaneseSearch,nickname:this.enableNicknameSearch})}catch(t){console.error("åŠ è½½æœç´¢è®¾ç½®å¤±è´¥:",t)}},checkSearchOptionsWarning(){this.enabledSearchCount>=2?l({title:"æç¤º",content:"å½“å‰å¯ç”¨çš„æœç´¢é€‰é¡¹è¿‡å¤šï¼Œæœç´¢ç»“æœå¯èƒ½ä¼šæ¨¡ç³Šæˆ–è€…æ··ä¹±ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ",confirmText:"ç»§ç»­",cancelText:"å–æ¶ˆ",success:t=>{t.cancel?(this.enableEnglishSearch="true"===a("enableEnglishSearch"),this.enableJapaneseSearch="true"===a("enableJapaneseSearch"),this.enableNicknameSearch="true"===a("enableNicknameSearch")):this.saveSearchSettings()}}):this.saveSearchSettings()},saveSearchSettings(){e("enableEnglishSearch",this.enableEnglishSearch.toString()),e("enableJapaneseSearch",this.enableJapaneseSearch.toString()),e("enableNicknameSearch",this.enableNicknameSearch.toString()),this.cleanupSearchData(),(this.enableEnglishSearch||this.enableNicknameSearch)&&0===this.searchWordCount&&"github"!==this.dataSource&&this.downloadSearchData()},cleanupSearchData(){this.enableEnglishSearch||this.enableJapaneseSearch||this.enableNicknameSearch?this.enableEnglishSearch?this.enableNicknameSearch||this.removeNicknameData():this.removeEnglishData():(s("searchWords"),this.searchWordCount=0,this.searchDataStatusMessage="æœç´¢åŠŸèƒ½å·²å…¨éƒ¨å…³é—­ï¼Œæœç´¢è¯æ•°æ®å·²æ¸…ç†")},removeEnglishData(){try{const t=a("searchWords");if(t&&Array.isArray(t)){const a=t.map((t=>({...t,englishname:""})));e("searchWords",a)}}catch(t){console.error("æ¸…ç†è‹±æ–‡æ•°æ®å¤±è´¥:",t)}},removeNicknameData(){try{const t=a("searchWords");if(t&&Array.isArray(t)){const a=t.map((t=>({...t,searchword:[]})));e("searchWords",a)}}catch(t){console.error("æ¸…ç†å¤–å·æ•°æ®å¤±è´¥:",t)}},onEnglishSearchChange(t){"github"===this.dataSource||this.isDownloading||this.isUploading?n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"}):(this.enableEnglishSearch=t.detail.value,this.checkSearchOptionsWarning())},onJapaneseSearchChange(t){this.enableJapaneseSearch=t.detail.value,this.checkSearchOptionsWarning()},onNicknameSearchChange(t){"github"===this.dataSource||this.isDownloading||this.isUploading?n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"}):(this.enableNicknameSearch=t.detail.value,this.checkSearchOptionsWarning())},async downloadSearchData(){if("github"===this.dataSource||this.isDownloading||this.isUploading)n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"});else{this.searchDataStatusMessage="æ­£åœ¨ä»çŸ¥æ™“äº‘è·å–æœç´¢è¯æ•°æ®ä¿¡æ¯...";try{const s=await this.getSearchDataUrlFromMinapp();this.searchDataUrl=s.url,console.log("è·å–åˆ°çš„æœç´¢è¯æ•°æ®URL:",this.searchDataUrl),this.searchDataStatusMessage="æ­£åœ¨ä¸‹è½½æœç´¢è¯æ•°æ®...";const i=await new Promise(((a,e)=>{t({url:this.searchDataUrl,method:"GET",timeout:1e4,success:a,fail:e})}));if(200===i.statusCode){let t=i.data;if("string"==typeof t)try{t=JSON.parse(t)}catch(a){return console.error("æœç´¢è¯æ•°æ®JSONè§£æå¤±è´¥:",a),void(this.searchDataStatusMessage="æœç´¢è¯æ•°æ®æ ¼å¼é”™è¯¯")}if(Array.isArray(t)){const a=this.processSearchWords(t);e("searchWords",a),this.searchWordCount=a.length,this.searchDataStatusMessage=`æœç´¢è¯æ•°æ®ä¸‹è½½æˆåŠŸ (${a.length} ä¸ªå¹²å‘˜)`,e("searchDataVersion",s.version||"æœªçŸ¥ç‰ˆæœ¬"),e("searchDataUpdateTime",s.updateTime||(new Date).toISOString()),n({title:"æœç´¢è¯æ•°æ®æ›´æ–°æˆåŠŸ",icon:"success",duration:2e3}),this.loadDataInfo()}else this.searchDataStatusMessage="æœç´¢è¯æ•°æ®æ ¼å¼ä¸æ­£ç¡®"}else this.searchDataStatusMessage=`æœåŠ¡å™¨é”™è¯¯: ${i.statusCode}`}catch(s){console.error("ä¸‹è½½æœç´¢è¯æ•°æ®å¤±è´¥:",s),this.searchDataStatusMessage="ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"}}},processSearchWords(t){const a={};let e=0,s=0;console.log("å¼€å§‹å¤„ç†æœç´¢è¯æ•°æ®ï¼ŒåŸå§‹æ•°æ®é•¿åº¦:",t.length),t.forEach(((t,i)=>{if(s++,t.name&&""!==t.name.trim()){const s=t.name.trim();if(a[s]){if(!t.englishname&&!t.englishName||a[s].englishname||(a[s].englishname=t.englishname||t.englishName),!t.japanesename&&!t.japaneseName||a[s].japanesename||(a[s].japanesename=t.japanesename||t.japaneseName),t.searchword||t.searchWord){const e=t.searchword||t.searchWord||[];Array.isArray(e)&&e.forEach((t=>{t&&!a[s].searchword.includes(t)&&a[s].searchword.push(t)}))}}else a[s]={name:s,englishname:t.englishname||t.englishName||"",japanesename:t.japanesename||t.japaneseName||"",searchword:t.searchword||t.searchWord||[]},e++}else Object.keys(t).forEach((s=>{if(s.startsWith("character")&&t[s]&&t[s].name){const i=t[s],o=i.name.trim();if(a[o]){if(!i.englishname&&!i.englishName||a[o].englishname||(a[o].englishname=i.englishname||i.englishName),!i.japanesename&&!i.japaneseName||a[o].japanesename||(a[o].japanesename=i.japanesename||i.japaneseName),i.searchword||i.serachword||i.searchWord){const t=i.searchword||i.serachword||i.searchWord||[];Array.isArray(t)&&t.forEach((t=>{t&&!a[o].searchword.includes(t)&&a[o].searchword.push(t)}))}}else a[o]={name:o,englishname:i.englishname||i.englishName||"",japanesename:i.japanesename||i.japaneseName||"",searchword:i.searchword||i.serachword||i.searchWord||[]},e++}}))})),console.log(`å¤„ç†æœç´¢è¯æ•°æ®: éå† ${s} ä¸ªå…ƒç´ , å»é‡å ${e} ä¸ªå¹²å‘˜`);const i=Object.values(a);return console.log("å¤„ç†åçš„æœç´¢è¯æ•°æ®ç¤ºä¾‹ï¼ˆå‰3ä¸ªï¼‰:",i.slice(0,3)),i},manageCustomSearchWords(){"github"===this.dataSource||this.isDownloading||this.isUploading?n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"}):f({url:"/packageA/custom-words/custom-words"})},loadGuessDataSetting(){try{const t=a("enableGuessData");this.enableGuessData="true"===t,this.enableGuessData&&0===this.guessDataCount&&"github"!==this.dataSource&&this.downloadGuessData()}catch(t){console.error("åŠ è½½é¢„æµ‹æ•°æ®è®¾ç½®å¤±è´¥:",t)}},onGuessDataChange(t){"github"===this.dataSource||this.isDownloading||this.isUploading?n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"}):(this.enableGuessData=t.detail.value,e("enableGuessData",this.enableGuessData.toString()),this.enableGuessData?this.downloadGuessData():(this.guessDataStatusMessage="é¢„æµ‹æ•°æ®å·²ç¦ç”¨",s("guessData"),this.guessDataCount=0,setTimeout((()=>{this.guessDataStatusMessage=""}),2e3)))},async downloadGuessData(){if("github"===this.dataSource||this.isDownloading||this.isUploading)n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºä¸æ”¯æŒæ­¤åŠŸèƒ½",icon:"none"});else{this.guessDataStatusMessage="æ­£åœ¨ä»çŸ¥æ™“äº‘è·å–é¢„æµ‹æ•°æ®ä¿¡æ¯...";try{const s="github"===this.dataSource?"github":"gitcode",i=await this.getGuessDataUrlFromMinapp(s),o=i.url;console.log(`è·å–åˆ°çš„é¢„æµ‹æ•°æ®URL (type=${s}):`,o),this.guessDataStatusMessage="æ­£åœ¨ä¸‹è½½é¢„æµ‹æ•°æ®...";const l=await new Promise(((a,e)=>{t({url:o,method:"GET",timeout:1e4,success:a,fail:e})}));if(200===l.statusCode){let t=l.data;if("string"==typeof t)try{t=JSON.parse(t)}catch(a){return console.error("é¢„æµ‹æ•°æ®JSONè§£æå¤±è´¥:",a),void(this.guessDataStatusMessage="é¢„æµ‹æ•°æ®æ ¼å¼é”™è¯¯")}if(Array.isArray(t)){const a=t.map((t=>{const a={};for(const e in t)"Box_id"===e?a[e]=String(t[e]||""):e.startsWith("character")?a[e]=t[e]:a[e]=String(t[e]||"");return a.Box_type="guess",a}));e("guessData",a),this.guessDataCount=a.length,this.guessDataStatusMessage=`é¢„æµ‹æ•°æ®ä¸‹è½½æˆåŠŸ (${a.length} ä¸ªé¢„æµ‹ç›’å·)`,e("guessDataVersion",i.version||"æœªçŸ¥ç‰ˆæœ¬"),e("guessDataUpdateTime",i.updateTime||(new Date).toISOString()),n({title:"é¢„æµ‹æ•°æ®æ›´æ–°æˆåŠŸ",icon:"success",duration:2e3}),this.loadDataInfo()}else this.guessDataStatusMessage="é¢„æµ‹æ•°æ®æ ¼å¼ä¸æ­£ç¡®"}else this.guessDataStatusMessage=`æœåŠ¡å™¨é”™è¯¯: ${l.statusCode}`}catch(s){console.error("ä¸‹è½½é¢„æµ‹æ•°æ®å¤±è´¥:",s),this.guessDataStatusMessage="ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"}}},loadAutoUpdateSetting(){try{const t=a("autoUpdateSetting");console.log("ä»å­˜å‚¨åŠ è½½çš„è‡ªåŠ¨æ›´æ–°è®¾ç½®:",t),t?(this.enableAutoUpdate=t.enabled||!1,this.lastAutoUpdateTime=t.lastCheckTime||"",console.log("åŠ è½½å enableAutoUpdate:",this.enableAutoUpdate),this.autoUpdateConfig={...this.autoUpdateConfig,enabled:t.enabled||!1,lastCheckTime:t.lastCheckTime||"",wifiOnly:void 0===t.wifiOnly||t.wifiOnly,autoDownload:void 0===t.autoDownload||t.autoDownload,checkFrequency:t.checkFrequency||24,checkInterval:t.checkInterval||864e5},this.setFrequencyIndexFromConfig(),this.enableAutoUpdate?(this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°å·²å¼€å¯",console.log("è‡ªåŠ¨æ›´æ–°çŠ¶æ€: å·²å¼€å¯")):(this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°å·²å…³é—­",console.log("è‡ªåŠ¨æ›´æ–°çŠ¶æ€: å·²å…³é—­"))):(console.log("æœªæ‰¾åˆ°è‡ªåŠ¨æ›´æ–°è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼"),this.enableAutoUpdate=!1,this.autoUpdateConfig={enabled:!1,lastCheckTime:"",wifiOnly:!0,autoDownload:!0,checkFrequency:24,checkInterval:864e5},this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°æœªé…ç½®")}catch(t){console.error("åŠ è½½è‡ªåŠ¨æ›´æ–°è®¾ç½®å¤±è´¥:",t),this.enableAutoUpdate=!1,this.autoUpdateConfig={enabled:!1,lastCheckTime:"",wifiOnly:!0,autoDownload:!0,checkFrequency:24,checkInterval:864e5},this.autoUpdateStatusMessage="åŠ è½½è®¾ç½®å¤±è´¥"}},setFrequencyIndexFromConfig(){const t=this.autoUpdateConfig.checkInterval||864e5;this.updateFrequencyIndex=this.updateFrequencyValues.findIndex((a=>a===t)),-1===this.updateFrequencyIndex&&(this.updateFrequencyIndex=2)},saveAutoUpdateSetting(){try{const t={enabled:this.enableAutoUpdate,lastCheckTime:this.lastAutoUpdateTime||"",wifiOnly:this.autoUpdateConfig.wifiOnly,autoDownload:this.autoUpdateConfig.autoDownload,checkFrequency:this.autoUpdateConfig.checkFrequency,checkInterval:this.updateFrequencyValues[this.updateFrequencyIndex]};console.log("ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®ï¼ˆåŸå§‹å¯¹è±¡ï¼‰:",t);const a=JSON.parse(JSON.stringify(t));if(console.log("ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®ï¼ˆæ™®é€šå¯¹è±¡ï¼‰:",a),e("autoUpdateSetting",a),console.log("è‡ªåŠ¨æ›´æ–°è®¾ç½®å·²ä¿å­˜åˆ°å­˜å‚¨"),void 0!==m){const t=m();t&&t.globalData&&(t.globalData.autoUpdateSetting=a)}return!0}catch(t){return console.error("ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®å¤±è´¥:",t),!1}},onAutoUpdateChange(t){if(console.log("è‡ªåŠ¨æ›´æ–°å¼€å…³å˜åŒ–:",t.detail.value),"github"===this.dataSource||"custom"===this.dataSource||this.isDownloading||this.isUploading)return n({title:this.isDownloading||this.isUploading?"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™":"GitHubæºå’Œè‡ªå®šä¹‰æ•°æ®ä¸æ”¯æŒè‡ªåŠ¨æ›´æ–°",icon:"none"}),void this.$nextTick((()=>{this.enableAutoUpdate=!t.detail.value}));const a=t.detail.value;console.log("æ–°å€¼:",a,"å½“å‰å€¼:",this.enableAutoUpdate),this.enableAutoUpdate=a,a?setTimeout((()=>{this.showAutoUpdateConfirm()}),100):setTimeout((()=>{this.disableAutoUpdate()}),100)},showAutoUpdateConfirm(){console.log("æ˜¾ç¤ºè‡ªåŠ¨æ›´æ–°ç¡®è®¤å¯¹è¯æ¡†"),l({title:"å¯ç”¨è‡ªåŠ¨æ›´æ–°",content:"å¯ç”¨åï¼Œç³»ç»Ÿå°†åœ¨åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥æ•°æ®æ›´æ–°ã€‚æ‚¨å¯ä»¥åœ¨è®¾ç½®ä¸­é…ç½®æ£€æŸ¥é¢‘ç‡å’Œç½‘ç»œæ¡ä»¶ã€‚æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼Ÿ",confirmText:"å¯ç”¨é…ç½®",cancelText:"ä»…æ›´æ–°",success:t=>{console.log("ç”¨æˆ·é€‰æ‹©:",t.confirm?"å¯ç”¨å¹¶é…ç½®":"ä»…å¯ç”¨"),t.confirm?(this.showAutoUpdateModal=!0,console.log("æ‰“å¼€é…ç½®å¼¹çª—")):t.cancel&&(console.log("ä»…å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®"),this.enableAutoUpdateConfirm())},fail:t=>{console.error("æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†å¤±è´¥:",t),this.enableAutoUpdate=!1}})},enableAutoUpdateConfirm(){console.log("ç¡®è®¤å¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œå½“å‰çŠ¶æ€:",this.enableAutoUpdate),this.enableAutoUpdate||(this.enableAutoUpdate=!0);this.saveAutoUpdateSetting()?(this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°å·²å¼€å¯",n({title:"è‡ªåŠ¨æ›´æ–°å·²å¯ç”¨",icon:"success",duration:2e3}),this.loadDataInfo(),this.notifyAutoUpdateChanged(),this.showAutoUpdateModal||console.log("è‡ªåŠ¨æ›´æ–°å·²å¯ç”¨ï¼Œæœªæ‰“å¼€é…ç½®å¼¹çª—")):(this.enableAutoUpdate=!1,n({title:"ä¿å­˜å¤±è´¥",icon:"error",duration:2e3}))},notifyAutoUpdateChanged(){(m().globalData||{}).autoUpdateSetting={...this.autoUpdateConfig,enabled:this.enableAutoUpdate,lastCheckTime:this.lastAutoUpdateTime},console.log("å·²é€šçŸ¥å…¶ä»–é¡µé¢è‡ªåŠ¨æ›´æ–°è®¾ç½®å·²æ›´æ”¹")},disableAutoUpdate(){this.saveAutoUpdateSetting()&&(this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°å·²å…³é—­",n({title:"è‡ªåŠ¨æ›´æ–°å·²å…³é—­",icon:"success",duration:2e3}),setTimeout((()=>{this.autoUpdateStatusMessage=""}),3e3),this.loadDataInfo())},closeAutoUpdateModal(){this.showAutoUpdateModal=!1},saveAutoUpdateConfig(){console.log("ä¿å­˜è‡ªåŠ¨æ›´æ–°é…ç½®"),this.enableAutoUpdate||(this.enableAutoUpdate=!0);this.saveAutoUpdateSetting()?(this.showAutoUpdateModal=!1,this.autoUpdateStatusMessage="è‡ªåŠ¨æ›´æ–°é…ç½®å·²ä¿å­˜",n({title:"é…ç½®å·²ä¿å­˜",icon:"success",duration:2e3}),this.loadDataInfo()):n({title:"ä¿å­˜å¤±è´¥",icon:"error",duration:2e3})},onWifiOnlyChange(t){this.autoUpdateConfig.wifiOnly=t.detail.value},onFrequencyChange(t){this.updateFrequencyIndex=t.detail.value,this.autoUpdateConfig.checkInterval=this.updateFrequencyValues[this.updateFrequencyIndex]},onAutoDownloadChange(t){this.autoUpdateConfig.autoDownload=t.detail.value},manualCheckUpdate(){"github"!==this.dataSource&&"custom"!==this.dataSource?this.isDownloading||this.isUploading?n({title:"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™",icon:"none"}):(this.autoUpdateStatusMessage="æ­£åœ¨æ£€æŸ¥æ›´æ–°...",setTimeout((()=>{this.autoUpdateStatusMessage="å·²è§¦å‘æ£€æŸ¥æ›´æ–°ï¼Œè¯·æŸ¥çœ‹åº”ç”¨å¯åŠ¨æ—¶çš„æç¤º"}),1e3)):n({title:"å½“å‰æ•°æ®æºä¸æ”¯æŒè‡ªåŠ¨æ›´æ–°",icon:"none"})},getAutoUpdateConfig(){return this.autoUpdateConfig},updateAutoUpdateStatus(t,a=""){this.autoUpdateStatusMessage=t,a&&(this.lastAutoUpdateTime=a)},calculateDataSize(){try{let t=this.unifiedData||a("currentData");if(!t){const t=a("arknightsData"),e=a("guessData"),s=a("searchWords"),i=a("customSearchWords"),o=a("githubCharacters"),n=a("customData");let l=0;const c=t=>{let a=0;for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);a+=s<=127?1:s<=2047?2:3}return a};if(t&&Array.isArray(t)){l+=c(JSON.stringify(t))}if(e&&Array.isArray(e)){l+=c(JSON.stringify(e))}if(s&&Array.isArray(s)){l+=c(JSON.stringify(s))}if(i&&Array.isArray(i)){l+=c(JSON.stringify(i))}if(o&&Array.isArray(o)){l+=c(JSON.stringify(o))}if(n&&Array.isArray(n)){l+=c(JSON.stringify(n))}if(l>0){const t=(l/1024).toFixed(2);this.localDataSize=`${t} KB`}else this.localDataSize="æ— æ•°æ®";return}const e=(JSON.stringify(t).length/1024).toFixed(2);this.localDataSize=`${e} KB`}catch(t){console.error("è®¡ç®—æ•°æ®å¤§å°å¤±è´¥:",t),this.localDataSize="æœªçŸ¥"}},formatCloudTime(t){if(!t)return"";try{const a=new Date(t);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`}catch(a){return console.error("æ ¼å¼åŒ–äº‘ç«¯æ—¶é—´å¤±è´¥:",a),t}},showDeleteConfirm(){this.isDownloading||this.isUploading?n({title:"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™",icon:"none"}):l({title:"ç¡®è®¤åˆ é™¤",content:"ç¡®å®šè¦åˆ é™¤æ‰€æœ‰æœ¬åœ°å¹²å‘˜æ•°æ®å—ï¼Ÿåˆ é™¤åéœ€è¦é‡æ–°ä¸‹è½½æ•°æ®æ‰èƒ½ä½¿ç”¨æŸ¥è¯¢åŠŸèƒ½ã€‚",confirmText:"åˆ é™¤",confirmColor:"#FA5151",success:t=>{t.confirm&&this.deleteLocalData()}})},loadMarketPriceSetting(){try{const t=a("showMarketPrice");this.showMarketPrice="true"===t,console.log("åŠ è½½å¸‚ä»·è®¾ç½®:",this.showMarketPrice)}catch(t){console.error("åŠ è½½å¸‚ä»·è®¾ç½®å¤±è´¥:",t),this.showMarketPrice=!1}},onMarketPriceChange(t){if(this.isDownloading||this.isUploading)return void n({title:"æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™",icon:"none"});const a=t.detail.value;if(!a)return this.showMarketPrice=!1,e("showMarketPrice","false"),void n({title:"å·²å…³é—­å¸‚ä»·å±•ç¤º",icon:"success",duration:1500});this.showMarketPriceDisclaimerModal(a)},showMarketPriceDisclaimerModal(t){l({title:"å…è´£å£°æ˜",content:"æœ¬ç¨‹åºæ˜¾ç¤ºçš„å¸‚ä»·ä¿¡æ¯æ¥æºäºç¬¬ä¸‰æ–¹å¹³å°ï¼ˆåƒå²›APPï¼‰ï¼Œæ•°æ®ä»…ä¾›å‚è€ƒã€‚\n\nè¯·æ³¨æ„ï¼š\n1. æœ¬ç¨‹åºä¸ä¿è¯æ•°æ®ä»·æ ¼çš„å‡†ç¡®æ€§å’ŒçœŸå®æ€§\n2. ä»·æ ¼å¯èƒ½å› å¸‚åœºæ³¢åŠ¨è€Œå®æ—¶å˜åŒ–\n3. è¯·ä»¥å®é™…äº¤æ˜“ä»·æ ¼ä¸ºå‡†\n4. å› ä¾èµ–æ­¤ä¿¡æ¯é€ æˆçš„ä»»ä½•æŸå¤±ï¼Œæœ¬ç¨‹åºæ¦‚ä¸è´Ÿè´£\n\næ˜¯å¦åŒæ„ä¸Šè¿°å£°æ˜å¹¶å¼€å¯å¸‚ä»·å±•ç¤ºï¼Ÿ",confirmText:"åŒæ„å¼€å¯",cancelText:"å–æ¶ˆ",confirmColor:"#409EFF",cancelColor:"#999999",success:t=>{t.confirm?(this.showMarketPrice=!0,e("showMarketPrice","true"),n({title:"å·²å¼€å¯å¸‚ä»·å±•ç¤º",icon:"success",duration:2e3}),setTimeout((()=>{l({title:"æ¸©é¦¨æç¤º",content:"å¸‚ä»·æ•°æ®æ¥æºäºåƒå²›APPï¼Œä»…ä¾›å‚è€ƒã€‚å®é™…ä»·æ ¼è¯·ä»¥äº¤æ˜“æ—¶ä¸ºå‡†ã€‚",showCancel:!1,confirmText:"çŸ¥é“äº†",confirmColor:"#409EFF"})}),1e3)):t.cancel&&(this.showMarketPrice=!1,e("showMarketPrice","false"),this.$forceUpdate(),n({title:"å·²å–æ¶ˆå¼€å¯å¸‚ä»·",icon:"none",duration:1500}))},fail:t=>{console.error("æ˜¾ç¤ºå…è´£å£°æ˜å¤±è´¥:",t),this.showMarketPrice=!1,this.$forceUpdate()}})},deleteLocalData(){try{if(!this.clearAllDownloadedFiles())throw new Error("æ¸…é™¤æ•°æ®å¤±è´¥");this.dataSource="domestic",e("dataSource","domestic"),this.resetAllDataStates(),n({title:"æ•°æ®åˆ é™¤æˆåŠŸï¼Œå·²åˆ‡æ¢å›å›½å†…æº",icon:"success",duration:2e3}),setTimeout((()=>{p()}),1500)}catch(t){console.error("åˆ é™¤æ•°æ®å¤±è´¥:",t),n({title:"åˆ é™¤å¤±è´¥",icon:"error",duration:2e3})}}}},[["render",function(t,a,e,s,i,o){const n=M,l=b,c=F,r=I,u=G;return w(),S(l,{class:"container"},{default:D((()=>[y(l,{class:"section"},{default:D((()=>[y(l,{class:"section-header"},{default:D((()=>[y(n,{class:"section-title"},{default:D((()=>[_("æ•°æ®æºè®¾ç½®")])),_:1})])),_:1}),y(l,{class:"section-content"},{default:D((()=>[y(l,{class:"data-source-options"},{default:D((()=>[(w(!0),C(k,null,U(i.dataSourceOptions,(t=>(w(),S(l,{class:A(["data-source-item",{active:i.dataSource===t.value,disabled:t.disabled||"github"===t.value&&i.isDownloading,loading:"github"===t.value&&i.isDownloading}]),key:t.value,onClick:a=>o.selectDataSource(t.value)},{default:D((()=>[y(l,{class:"data-source-info"},{default:D((()=>[y(n,{class:"data-source-label"},{default:D((()=>[_(v(t.label)+" ",1),"github"===t.value&&i.isDownloading?(w(),S(n,{key:0,class:"loading-text"},{default:D((()=>[_(" (ä¸‹è½½ä¸­...)")])),_:1})):T("",!0)])),_:2},1024),y(n,{class:"data-source-desc"},{default:D((()=>[_(v(t.desc),1)])),_:2},1024),t.warning?(w(),S(n,{key:0,class:"data-source-warning"},{default:D((()=>[_(v(t.warning),1)])),_:2},1024)):T("",!0)])),_:2},1024),y(l,{class:"data-source-radio"},{default:D((()=>[i.dataSource!==t.value||i.isDownloading?T("",!0):(w(),S(l,{key:0,class:"radio-inner"})),"github"===t.value&&i.isDownloading?(w(),S(l,{key:1,class:"loading-spinner"})):T("",!0)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),"custom"===i.dataSource||"local"===i.dataSource?(w(),S(l,{key:0,class:"custom-data-management"},{default:D((()=>[y(l,{class:"custom-data-actions"},{default:D((()=>[y(c,{class:"upload-btn",onClick:o.uploadCustomData,disabled:i.isUploading},{default:D((()=>[i.isUploading?(w(),S(n,{key:0},{default:D((()=>[_("ä¸Šä¼ ä¸­...")])),_:1})):(w(),S(n,{key:1},{default:D((()=>[_("ä¸Šä¼ è‡ªå®šä¹‰JSONæ•°æ®")])),_:1}))])),_:1},8,["onClick","disabled"]),y(c,{class:"export-btn",onClick:o.exportToLocal,disabled:!i.hasDomesticData},{default:D((()=>[_(" å¯¼å‡ºå¹¶åˆ†äº«æ•°æ® ")])),_:1},8,["onClick","disabled"])])),_:1}),i.customDataInfo?(w(),S(l,{key:0,class:"custom-data-info"},{default:D((()=>[y(n,{class:"info-title"},{default:D((()=>[_("è‡ªå®šä¹‰æ•°æ®ä¿¡æ¯")])),_:1}),y(l,{class:"info-item"},{default:D((()=>[y(n,{class:"info-label"},{default:D((()=>[_("æ•°æ®æ¥æº:")])),_:1}),y(n,{class:"info-value"},{default:D((()=>[_(v(i.customDataInfo.source),1)])),_:1})])),_:1}),y(l,{class:"info-item"},{default:D((()=>[y(n,{class:"info-label"},{default:D((()=>[_("ä¸Šä¼ æ—¶é—´:")])),_:1}),y(n,{class:"info-value"},{default:D((()=>[_(v(i.customDataInfo.uploadTime),1)])),_:1})])),_:1}),y(l,{class:"info-item"},{default:D((()=>[y(n,{class:"info-label"},{default:D((()=>[_("æ•°æ®å¤§å°:")])),_:1}),y(n,{class:"info-value"},{default:D((()=>[_(v(i.customDataInfo.size),1)])),_:1})])),_:1}),y(l,{class:"info-item"},{default:D((()=>[y(n,{class:"info-label"},{default:D((()=>[_("ç›’å·æ•°é‡:")])),_:1}),y(n,{class:"info-value"},{default:D((()=>[_(v(i.customDataInfo.boxCount)+" ä¸ª",1)])),_:1})])),_:1}),i.customDataInfo.validation?(w(),S(l,{key:0,class:"info-item"},{default:D((()=>[y(n,{class:"info-label"},{default:D((()=>[_("æ•°æ®éªŒè¯:")])),_:1}),y(n,{class:A(["info-value",i.customDataInfo.validation.valid?"valid":"invalid"])},{default:D((()=>[_(v(i.customDataInfo.validation.message),1)])),_:1},8,["class"])])),_:1})):T("",!0)])),_:1})):T("",!0),"custom"===i.dataSource?(w(),S(l,{key:1,class:"custom-data-warning"},{default:D((()=>[y(n,{class:"warning-title"},{default:D((()=>[_("âš ï¸ ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®è¯·æ³¨æ„")])),_:1}),y(n,{class:"warning-text"},{default:D((()=>[_("1. è‡ªå®šä¹‰æ•°æ®éœ€ç¬¦åˆç‰¹å®šæ ¼å¼è¦æ±‚æ‰èƒ½æ­£å¸¸ä½¿ç”¨")])),_:1}),y(n,{class:"warning-text"},{default:D((()=>[_("2. ä¸Šä¼ åç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯æ•°æ®æ ¼å¼")])),_:1}),y(n,{class:"warning-text"},{default:D((()=>[_("3. æ ¼å¼é”™è¯¯å¯èƒ½å¯¼è‡´åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨")])),_:1}),y(n,{class:"warning-text"},{default:D((()=>[_('4. å»ºè®®ä½¿ç”¨"å¯¼å‡ºå›½å†…æºæ•°æ®åˆ°æœ¬åœ°"åŠŸèƒ½è·å–æ ‡å‡†æ•°æ®')])),_:1})])),_:1})):T("",!0)])),_:1})):T("",!0),y(l,{class:"data-source-tips"},{default:D((()=>[y(n,{class:"tip-text"},{default:D((()=>[_("*æ¨èä½¿ç”¨å›½å†…æºï¼Œé€Ÿåº¦æœ€å¿«æœ€ç¨³å®š")])),_:1}),y(n,{class:"tip-text"},{default:D((()=>[_("*GitHubæºæ— æ³•å±•ç¤ºåˆ†ç›’ä¿¡æ¯ã€å¸‚ä»·ä¿¡æ¯ã€è§’è‰²å¤´åƒåŠçƒ­åº¦æ ‡è®°ç­‰ç‰¹æ®ŠåŠŸèƒ½")])),_:1}),"local"===i.dataSource?(w(),S(n,{key:0,class:"tip-text"},{default:D((()=>[_("å½“å‰ä½¿ç”¨æœ¬åœ°æ•°æ®ï¼Œç‰ˆæœ¬ï¼š"+v(i.currentVersion||"æœªçŸ¥"),1)])),_:1})):T("",!0),"custom"===i.dataSource?(w(),S(n,{key:1,class:"tip-text"},{default:D((()=>[_("å½“å‰ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®")])),_:1})):T("",!0),"github"===i.dataSource?(w(),S(n,{key:2,class:"tip-text"},{default:D((()=>[_("å½“å‰ä½¿ç”¨GitHubæºï¼Œä»…æ”¯æŒåŸºç¡€æ•°æ®")])),_:1})):T("",!0),i.isDownloading?(w(),S(n,{key:3,class:"tip-text"},{default:D((()=>[_("æ­£åœ¨ä¸‹è½½GitHubæ•°æ®ï¼Œè¯·ç¨å€™...")])),_:1})):T("",!0)])),_:1})])),_:1})])),_:1}),y(l,{class:"section"},{default:D((()=>[y(l,{class:"section-header"},{default:D((()=>[y(n,{class:"section-title"},{default:D((()=>[_("æ•°æ®ç®¡ç†")])),_:1})])),_:1}),y(l,{class:"section-content"},{default:D((()=>[y(l,{class:"setting-item"},{default:D((()=>[y(l,{class:"setting-info"},{default:D((()=>[y(n,{class:"setting-name"},{default:D((()=>[_("åˆ é™¤æœ¬åœ°æ•°æ®")])),_:1}),y(n,{class:"setting-desc"},{default:D((()=>[_("æ¸…é™¤å·²ä¸‹è½½çš„å¹²å‘˜æ•°æ®ï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´")])),_:1}),i.localDataSize?(w(),S(n,{key:0,class:"data-info"},{default:D((()=>[_("å½“å‰æ•°æ®å¤§å°: "+v(i.localDataSize),1)])),_:1})):T("",!0),y(n,{class:"tip-text"},{default:D((()=>[_("*åˆ é™¤æ•°æ®åï¼Œæ‚¨éœ€è¦é‡æ–°ä¸‹è½½æ•°æ®æ‰èƒ½ä½¿ç”¨å…¶ä»–åŠŸèƒ½")])),_:1}),y(n,{class:"tip-text"},{default:D((()=>[_("*åˆ é™¤æ•°æ®åä¼šè‡ªåŠ¨åˆ‡æ¢å›å›½å†…æº")])),_:1})])),_:1}),y(c,{class:"danger-btn",onClick:o.showDeleteConfirm,disabled:i.isDownloading},{default:D((()=>[_("åˆ é™¤æ•°æ®")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1}),y(l,{class:"section"},{default:D((()=>[y(l,{class:"section-header"},{default:D((()=>[y(n,{class:"section-title"},{default:D((()=>[_("æœç´¢åŠŸèƒ½è®¾ç½®")])),_:1})])),_:1}),y(l,{class:"section-content"},{default:D((()=>[y(l,{class:"search-switches-row"},{default:D((()=>[y(l,{class:"search-switch-item"},{default:D((()=>[y(l,{class:"switch-info"},{default:D((()=>[y(n,{class:"switch-name"},{default:D((()=>[_("å¯ç”¨è‹±æ–‡åæœç´¢")])),_:1}),y(n,{class:"switch-desc-small"},{default:D((()=>[_("Enable English Name search")])),_:1}),y(r,{checked:i.enableEnglishSearch,onChange:o.onEnglishSearchChange,class:"search-switch",disabled:"github"===i.dataSource||i.isDownloading},null,8,["checked","onChange","disabled"]),"github"===i.dataSource?(w(),S(n,{key:0,class:"warning-text-small"},{default:D((()=>[_("GitHubæºä¸æ”¯æŒ")])),_:1})):T("",!0)])),_:1})])),_:1}),y(l,{class:"search-switch-item disabled"},{default:D((()=>[y(l,{class:"switch-info"},{default:D((()=>[y(n,{class:"switch-name"},{default:D((()=>[_("å¯ç”¨æ—¥æ–‡åæœç´¢")])),_:1}),y(n,{class:"switch-desc-small"},{default:D((()=>[_("æ—¥æœ¬èªåæ¤œç´¢ã‚’æœ‰åŠ¹ã«ã™ã‚‹")])),_:1}),y(n,{class:"dev-tag-small"},{default:D((()=>[_("å¼€å‘ä¸­")])),_:1}),y(r,{checked:i.enableJapaneseSearch,onChange:o.onJapaneseSearchChange,class:"search-switch",disabled:""},null,8,["checked","onChange"])])),_:1})])),_:1}),y(l,{class:"search-switch-item"},{default:D((()=>[y(l,{class:"switch-info"},{default:D((()=>[y(n,{class:"switch-name"},{default:D((()=>[_("å¯ç”¨å¤–å·æœç´¢")])),_:1}),y(n,{class:"switch-desc-small"},{default:D((()=>[_("ä»…æ”¯æŒéƒ¨åˆ†å¹²å‘˜")])),_:1}),y(r,{checked:i.enableNicknameSearch,onChange:o.onNicknameSearchChange,class:"search-switch",disabled:"github"===i.dataSource||i.isDownloading},null,8,["checked","onChange","disabled"]),"github"===i.dataSource?(w(),S(n,{key:0,class:"warning-text-small"},{default:D((()=>[_("GitHubæºä¸æ”¯æŒ")])),_:1})):T("",!0)])),_:1})])),_:1})])),_:1}),i.enableEnglishSearch||i.enableNicknameSearch?(w(),S(l,{key:0,class:"search-data-status"},{default:D((()=>[y(n,{class:A(["search-status-text",o.searchDataStatusClass])},{default:D((()=>[_(v(i.searchDataStatusMessage),1)])),_:1},8,["class"]),y(c,{class:"retry-btn",onClick:o.downloadSearchData,disabled:"github"===i.dataSource||i.isDownloading},{default:D((()=>[_(v(i.searchDataStatusMessage.includes("å¤±è´¥")?"é‡è¯•ä¸‹è½½":"æ›´æ–°æ•°æ®"),1)])),_:1},8,["onClick","disabled"])])),_:1})):T("",!0),y(l,{class:"setting-item"},{default:D((()=>[y(l,{class:"setting-info"},{default:D((()=>[y(n,{class:"setting-name"},{default:D((()=>[_("è‡ªå®šä¹‰æœç´¢è¯")])),_:1}),y(n,{class:"setting-desc"},{default:D((()=>[_("æ·»åŠ ä¸ªäººå¸¸ç”¨çš„å¹²å‘˜åˆ«åå’Œæœç´¢è¯")])),_:1}),i.customWordsCount>0?(w(),S(n,{key:0,class:"data-info"},{default:D((()=>[_("å·²æ·»åŠ  "+v(i.customWordsCount)+" ä¸ªè‡ªå®šä¹‰æœç´¢è¯",1)])),_:1})):T("",!0),"github"===i.dataSource?(w(),S(n,{key:1,class:"warning-text"},{default:D((()=>[_("GitHubæºæ— æ³•ä½¿ç”¨è‡ªå®šä¹‰æœç´¢è¯")])),_:1})):T("",!0)])),_:1}),y(c,{class:"secondary-btn",onClick:o.manageCustomSearchWords,disabled:"github"===i.dataSource||i.isDownloading},{default:D((()=>[_("ç®¡ç†")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1}),y(l,{class:"section"},{default:D((()=>[y(l,{class:"section-header"},{default:D((()=>[y(n,{class:"section-title"},{default:D((()=>[_("åŠŸèƒ½è®¾ç½®")])),_:1})])),_:1}),y(l,{class:"section-content"},{default:D((()=>[y(l,{class:"setting-item"},{default:D((()=>[y(l,{class:"setting-info"},{default:D((()=>[y(n,{class:"setting-name"},{default:D((()=>[_("å¯ç”¨é¢„æµ‹é€šè¡Œè¯")])),_:1}),y(n,{class:"setting-desc"},{default:D((()=>[_("æ˜¾ç¤ºå®˜æ–¹æœªå…¬å¸ƒçš„æ–°é€šè¡Œè¯é¢„æµ‹ä¿¡æ¯")])),_:1}),y(n,{class:"warning-text"},{default:D((()=>[_("è¯·ä»¥å®˜æ–¹æœ€ç»ˆå‘å¸ƒä¸ºå‡†")])),_:1}),y(n,{class:"red-text"},{default:D((()=>[_("*é‡å¯ç¨‹åºç”Ÿæ•ˆ")])),_:1}),"github"===i.dataSource?(w(),S(n,{key:0,class:"warning-text"},{default:D((()=>[_("GitHubæºä¸æ”¯æŒé¢„æµ‹æ•°æ®")])),_:1})):T("",!0)])),_:1}),y(r,{checked:i.enableGuessData,onChange:o.onGuessDataChange,class:"setting-switch",disabled:"github"===i.dataSource||i.isDownloading},null,8,["checked","onChange","disabled"])])),_:1}),i.enableGuessData&&"github"!==i.dataSource?(w(),S(l,{key:0,class:"guess-data-status"},{default:D((()=>[y(n,{class:A(["guess-status-text",o.guessDataStatusClass])},{default:D((()=>[_(v(i.guessDataStatusMessage),1)])),_:1},8,["class"]),y(c,{class:"retry-btn",onClick:o.downloadGuessData,disabled:i.isDownloading},{default:D((()=>[_(v(i.guessDataStatusMessage.includes("å¤±è´¥")?"é‡è¯•ä¸‹è½½":"æ›´æ–°æ•°æ®"),1)])),_:1},8,["onClick","disabled"])])),_:1})):T("",!0),y(l,{class:"setting-item"},{default:D((()=>[y(l,{class:"setting-info"},{default:D((()=>[y(n,{class:"setting-name"},{default:D((()=>[_("å¹²å‘˜æ•°æ®è‡ªåŠ¨æ›´æ–°")])),_:1}),y(n,{class:"setting-desc"},{default:D((()=>[_("æ£€æµ‹åˆ°æ•°æ®æ›´æ–°æ—¶è‡ªåŠ¨ä¸‹è½½ï¼Œå»ºè®®åªåœ¨Wi-FiçŠ¶æ€ä¸‹å¯ç”¨")])),_:1}),y(n,{class:"red-text"},{default:D((()=>[_("*é‡å¯ç¨‹åºç”Ÿæ•ˆ")])),_:1}),"github"===i.dataSource||"custom"===i.dataSource?(w(),S(n,{key:0,class:"warning-text"},{default:D((()=>[_("GitHubæºå’Œè‡ªå®šä¹‰æ•°æ®æš‚ä¸æ”¯æŒè‡ªåŠ¨æ›´æ–°")])),_:1})):T("",!0),i.enableAutoUpdate?(w(),S(l,{key:1,class:"auto-update-status"},{default:D((()=>[y(n,{class:A(["auto-update-status-text",o.autoUpdateStatusClass])},{default:D((()=>[_(v(i.autoUpdateStatusMessage),1)])),_:1},8,["class"]),i.lastAutoUpdateTime?(w(),S(n,{key:0,class:"auto-update-time"},{default:D((()=>[_(" ä¸Šæ¬¡æ£€æŸ¥: "+v(i.lastAutoUpdateTime),1)])),_:1})):T("",!0)])),_:1})):T("",!0)])),_:1}),y(r,{checked:i.enableAutoUpdate,onChange:o.onAutoUpdateChange,class:"setting-switch",disabled:"github"===i.dataSource||"custom"===i.dataSource||i.isDownloading},null,8,["checked","onChange","disabled"])])),_:1}),i.enableAutoUpdate&&"github"!==i.dataSource&&"custom"!==i.dataSource?(w(),S(l,{key:1,class:"manual-update-check"},{default:D((()=>[y(c,{class:"secondary-btn",onClick:o.manualCheckUpdate,disabled:i.isDownloading||i.isUploading},{default:D((()=>[_(" ç«‹å³æ£€æŸ¥æ›´æ–° ")])),_:1},8,["onClick","disabled"])])),_:1})):T("",!0),y(l,{class:"setting-item"},{default:D((()=>[y(l,{class:"setting-info"},{default:D((()=>{var t,a;return[y(n,{class:"setting-name"},{default:D((()=>[_("å¼€å¯å¸‚ä»·å±•ç¤ºåŠŸèƒ½")])),_:1}),y(n,{class:"setting-desc"},{default:D((()=>[_("åœ¨å¹²å‘˜åˆ—è¡¨ä¸­æ˜¾ç¤ºå¸‚åœºä»·æ ¼ä¿¡æ¯")])),_:1}),"github"===i.dataSource?(w(),S(n,{key:0,class:"warning-text"},{default:D((()=>[_("GitHubæºä¸æ”¯æŒå¸‚ä»·å±•ç¤º")])),_:1})):T("",!0),"custom"!==i.dataSource||(null==(a=null==(t=i.customDataInfo)?void 0:t.validation)?void 0:a.valid)?T("",!0):(w(),S(n,{key:1,class:"warning-text"},{default:D((()=>[_("è‡ªå®šä¹‰æ•°æ®æ ¼å¼å¯èƒ½ä¸æ”¯æŒå¸‚ä»·")])),_:1}))]})),_:1}),y(r,{checked:i.showMarketPrice,onChange:o.onMarketPriceChange,class:"setting-switch",disabled:"github"===i.dataSource||i.isDownloading},null,8,["checked","onChange","disabled"])])),_:1})])),_:1})])),_:1}),y(l,{class:"data-status-section"},{default:D((()=>[y(n,{class:"status-title"},{default:D((()=>[_("å½“å‰æ•°æ®çŠ¶æ€")])),_:1}),y(l,{class:"status-list"},{default:D((()=>[y(l,{class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("å½“å‰æ•°æ®æº:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(o.getCurrentDataSourceName()),1)])),_:1})])),_:1}),i.localUpdateTime&&"github"!==i.dataSource?(w(),S(l,{key:0,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("æœ¬åœ°ä¸Šæ¬¡æ›´æ–°:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.localUpdateTime),1)])),_:1})])),_:1})):T("",!0),i.cloudUpdateTime&&"github"!==i.dataSource?(w(),S(l,{key:1,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("äº‘ç«¯æœ€æ–°æ›´æ–°:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(o.formatCloudTime(i.cloudUpdateTime)),1)])),_:1})])),_:1})):T("",!0),i.currentVersion?(w(),S(l,{key:2,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("æ•°æ®ç‰ˆæœ¬:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.currentVersion),1)])),_:1})])),_:1})):T("",!0),i.dataCount>0&&"github"!==i.dataSource?(w(),S(l,{key:3,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("æ•°æ®é‡:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.dataCount)+" ä¸ªç›’å·",1)])),_:1})])),_:1})):T("",!0),i.enableGuessData&&i.guessDataCount>0&&"github"!==i.dataSource?(w(),S(l,{key:4,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("é¢„æµ‹æ•°æ®:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.guessDataCount)+" ä¸ªé¢„æµ‹ç›’å·",1)])),_:1})])),_:1})):T("",!0),i.searchWordCount>0&&"github"!==i.dataSource?(w(),S(l,{key:5,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("æœç´¢è¯æ•°æ®:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.searchWordCount)+" ä¸ªå¹²å‘˜",1)])),_:1})])),_:1})):T("",!0),"github"===i.dataSource&&i.githubCharactersCount>0?(w(),S(l,{key:6,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("GitHubè§’è‰²æ•°æ®:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.githubCharactersCount)+" ä¸ªå¹²å‘˜",1)])),_:1})])),_:1})):T("",!0),i.customDataInfo&&"custom"===i.dataSource?(w(),S(l,{key:7,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("è‡ªå®šä¹‰æ•°æ®:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_(v(i.customDataInfo.boxCount)+" ä¸ªç›’å·",1)])),_:1})])),_:1})):T("",!0),i.enableAutoUpdate&&"github"!==i.dataSource&&"custom"!==i.dataSource?(w(),S(l,{key:8,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("è‡ªåŠ¨æ›´æ–°:")])),_:1}),y(n,{class:"status-value"},{default:D((()=>[_("å·²å¯ç”¨")])),_:1})])),_:1})):T("",!0),i.isDownloading?(w(),S(l,{key:9,class:"status-item"},{default:D((()=>[y(n,{class:"status-label"},{default:D((()=>[_("ä¸‹è½½çŠ¶æ€:")])),_:1}),y(n,{class:"status-value loading-status"},{default:D((()=>[_("æ­£åœ¨ä¸‹è½½GitHubæ•°æ®...")])),_:1})])),_:1})):T("",!0)])),_:1})])),_:1}),i.showValidationModal?(w(),S(l,{key:0,class:"validation-modal"},{default:D((()=>[y(l,{class:"validation-content"},{default:D((()=>[y(n,{class:"validation-title"},{default:D((()=>[_("æ•°æ®éªŒè¯ç»“æœ")])),_:1}),y(l,{class:A(["validation-result",i.validationResult.valid?"valid":"invalid"])},{default:D((()=>[y(n,{class:"result-text"},{default:D((()=>[_(v(i.validationResult.message),1)])),_:1}),i.validationResult.details?(w(),S(l,{key:0,class:"result-details"},{default:D((()=>[(w(!0),C(k,null,U(i.validationResult.details,((t,a)=>(w(),S(n,{class:"detail-item",key:a},{default:D((()=>[_(v(t),1)])),_:2},1024)))),128))])),_:1})):T("",!0)])),_:1},8,["class"]),y(l,{class:"validation-actions"},{default:D((()=>[i.validationResult.valid?T("",!0):(w(),S(c,{key:0,class:"cancel-btn",onClick:o.closeValidationModal},{default:D((()=>[_("å–æ¶ˆ")])),_:1},8,["onClick"])),y(c,{class:"confirm-btn",onClick:o.confirmUseCustomData,disabled:!i.validationResult.valid},{default:D((()=>[_(v(i.validationResult.valid?"ä½¿ç”¨æ­¤æ•°æ®":"æ•°æ®æ ¼å¼é”™è¯¯"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})):T("",!0),i.isUploading?(w(),S(l,{key:1,class:"upload-progress"},{default:D((()=>[y(l,{class:"progress-content"},{default:D((()=>[y(n,{class:"progress-title"},{default:D((()=>[_("æ­£åœ¨ä¸Šä¼ æ•°æ®")])),_:1}),y(n,{class:"progress-tip"},{default:D((()=>[_("æ­£åœ¨éªŒè¯æ•°æ®æ ¼å¼ï¼Œè¯·ç¨å€™...")])),_:1}),y(l,{class:"progress-bar"},{default:D((()=>[y(l,{class:"progress-inner",style:x({width:i.uploadProgress+"%"})},null,8,["style"])])),_:1}),y(n,{class:"progress-text"},{default:D((()=>[_(v(i.uploadProgress)+"%",1)])),_:1})])),_:1})])),_:1})):T("",!0),i.isDownloading?(w(),S(l,{key:2,class:"download-progress"},{default:D((()=>[y(l,{class:"progress-content"},{default:D((()=>[y(n,{class:"progress-title"},{default:D((()=>[_("æ­£åœ¨ä¸‹è½½GitHubæ•°æ®")])),_:1}),y(n,{class:"progress-tip"},{default:D((()=>[_("æ•°æ®é‡è¾ƒå¤§ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…...")])),_:1}),y(l,{class:"progress-bar"},{default:D((()=>[y(l,{class:"progress-inner",style:x({width:i.downloadProgress+"%"})},null,8,["style"])])),_:1}),y(n,{class:"progress-text"},{default:D((()=>[_("å·²ä¸‹è½½: "+v(i.downloadProgress)+"%",1)])),_:1}),y(c,{class:"cancel-btn",onClick:o.cancelDownload},{default:D((()=>[_("å–æ¶ˆä¸‹è½½")])),_:1},8,["onClick"])])),_:1})])),_:1})):T("",!0),i.showAutoUpdateModal?(w(),S(l,{key:3,class:"auto-update-modal"},{default:D((()=>[y(l,{class:"modal-content"},{default:D((()=>[y(n,{class:"modal-title"},{default:D((()=>[_("è‡ªåŠ¨æ›´æ–°è®¾ç½®")])),_:1}),y(l,{class:"modal-settings"},{default:D((()=>[y(l,{class:"setting-item"},{default:D((()=>[y(n,{class:"setting-label"},{default:D((()=>[_("ä»…Wi-Fiä¸‹è‡ªåŠ¨æ›´æ–°")])),_:1}),y(r,{checked:i.autoUpdateConfig.wifiOnly,onChange:o.onWifiOnlyChange,class:"setting-switch"},null,8,["checked","onChange"])])),_:1}),y(l,{class:"setting-item"},{default:D((()=>[y(n,{class:"setting-label"},{default:D((()=>[_("æ£€æŸ¥é¢‘ç‡")])),_:1}),y(u,{range:i.updateFrequencies,value:i.updateFrequencyIndex,onChange:o.onFrequencyChange,class:"frequency-picker"},{default:D((()=>[y(l,{class:"picker-view"},{default:D((()=>[_(v(i.updateFrequencies[i.updateFrequencyIndex])+" ",1),y(n,{class:"picker-arrow"},{default:D((()=>[_("â–¼")])),_:1})])),_:1})])),_:1},8,["range","value","onChange"])])),_:1}),y(l,{class:"setting-item"},{default:D((()=>[y(n,{class:"setting-label"},{default:D((()=>[_("è‡ªåŠ¨ä¸‹è½½æ›´æ–°")])),_:1}),y(r,{checked:i.autoUpdateConfig.autoDownload,onChange:o.onAutoDownloadChange,class:"setting-switch"},null,8,["checked","onChange"])])),_:1})])),_:1}),y(l,{class:"modal-tips"},{default:D((()=>[y(n,{class:"tip-text"},{default:D((()=>[_("*è‡ªåŠ¨æ›´æ–°åªåœ¨åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥")])),_:1}),y(n,{class:"tip-text"},{default:D((()=>[_('*å»ºè®®ä¿æŒ"ä»…Wi-Fiä¸‹è‡ªåŠ¨æ›´æ–°"å¼€å¯ä»¥èŠ‚çœæµé‡')])),_:1})])),_:1}),y(l,{class:"modal-actions"},{default:D((()=>[y(c,{class:"cancel-btn",onClick:o.closeAutoUpdateModal},{default:D((()=>[_("å–æ¶ˆ")])),_:1},8,["onClick"]),y(c,{class:"confirm-btn",onClick:o.saveAutoUpdateConfig},{default:D((()=>[_("ä¿å­˜è®¾ç½®")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):T("",!0)])),_:1})}],["__scopeId","data-v-8a2bd639"]]);export{P as default};
