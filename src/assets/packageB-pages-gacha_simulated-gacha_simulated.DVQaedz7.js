import{I as e,g as t,b as s,N as a,d as l,s as i,i as r,f as o,l as c,m as n,w as u,o as h,p as d,q as x,u as p,x as f,y as _,z as y,A as B,B as g,F as m,C as k,J as b,a1 as C,a2 as M,a3 as v,E as w,D as T,K as S}from"./index-BrYrmhwU.js";import{r as A,_ as P}from"./uni-notice-bar.BgxRIMtY.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=E({data:()=>({characterData:[],availableBoxes:[],typeOptions:[{label:"å…¨éƒ¨ç›’ç±»å‹",value:"all"},{label:"å¸¸è§„æ¬¾",value:"normal"},{label:"ç™½åå•å‡­è¯",value:"whitelist"},{label:"è”åŠ¨æ¬¾",value:"cooperation"},{label:"éŸ³å¾‹è”è§‰é€šè¡Œè¯",value:"ambience"}],selectedTypeIndex:0,selectedType:null,selectedBoxIndex:0,selectedBox:null,filteredBoxes:[],currentResult:null,gachaHistory:[],showHistory:!1,defaultAvatar:"/static/default-avatar.png",currentBoxPool:[],drawnCards:[],currentIndex:0,isAnimating:!1,showResult:!1,boxStartMarkers:{},boxEndMarkers:{},isSuperMixPool:!1,superMixAllCards:[],superMixTotalCards:0,superMixFilters:{excludeAmbience:!1,excludeSpecial:!1,excludeCooperation:!1,excludeWhitelist:!1},filteredBoxCount:0}),computed:{remainingCount(){return this.currentBoxPool.length-this.currentIndex},totalCount(){return this.currentBoxPool.length},gachaButtonText(){return this.isAnimating?"æŠ½å¡ä¸­...":this.selectedBox||this.isSuperMixPool?this.selectedBox&&0===this.remainingCount?"å·²æŠ½å®Œæ‰€æœ‰ç»“æœ":this.isSuperMixPool?"æ··æ± æŠ½å–":`æŠ½å– (${this.remainingCount}/${this.totalCount})`:"è¯·é€‰æ‹©ç›’å·æˆ–å¼€å¯æ··æ± "},isNoEliteBox(){return this.selectedBox&&("whitelist"===this.selectedBox.Box_type||"ambience"===this.selectedBox.Box_type)},totalDraws(){return this.gachaHistory.length},hotDraws(){return this.gachaHistory.filter((e=>e.character.hotcharacter)).length},superMixDraws(){return this.gachaHistory.filter((e=>e.isSuperMixPool)).length},normalDraws(){return this.gachaHistory.filter((e=>!e.isSuperMixPool)).length},qualifiedDraws(){return this.gachaHistory.filter((e=>!["ambience","special","whitelist"].includes(e.boxType))).length},qualifiedHotDraws(){return this.gachaHistory.filter((e=>!["ambience","special","whitelist"].includes(e.boxType)&&e.character.hotcharacter)).length},hotDrawsRate(){return 0===this.totalDraws?0:(this.hotDraws/this.totalDraws*100).toFixed(2)},luckRatio(){return 0===this.qualifiedDraws?0:(this.qualifiedHotDraws/this.qualifiedDraws*100).toFixed(2)},luckLevel(){if(0===this.qualifiedDraws)return null;const e=this.qualifiedHotDraws/this.qualifiedDraws;return e>=.8?"ç‚¹çŸ³æˆé‡‘æ¬§çš‡":e>=.5?"æ¬§çš‡é™„ä½“":e>=.3?"è–›å®šè°”çš„å°æ¬§çš‡":e>=.1?"å¹³å¹³æ·¡æ·¡":"éå…¥éª¨é«“"}},onLoad(){e({title:"é€šè¡Œè¯æ¨¡æ‹ŸæŠ½å¡å·¥å…·"}),this.loadLocalData(),this.loadGachaHistory(),this.selectedType=this.typeOptions[0],wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:()=>({title:"æ–¹èˆŸé€šè¡Œè¯è°·å­æŸ¥è¯¢å·¥å…·-æ¨¡æ‹ŸæŠ½å¡",path:"/packageB/pages/gacha_simulated/gacha_simulated",imageUrl:""}),onShareTimeline:()=>({title:"æ–¹èˆŸé€šè¡Œè¯è°·å­æŸ¥è¯¢å·¥å…·-æ¨¡æ‹ŸæŠ½å¡",imageUrl:""}),methods:{getLuckClass:e=>"ç‚¹çŸ³æˆé‡‘æ¬§çš‡"===e?"luck-gold":"æ¬§çš‡é™„ä½“"===e?"luck-eu":"è–›å®šè°”çš„å°æ¬§çš‡"===e?"luck-green":"å¹³å¹³æ·¡æ·¡"===e?"luck-normal":"éå…¥éª¨é«“"===e?"luck-poor":"",isExcludedFromStats:e=>["ambience","special","whitelist"].includes(e.boxType),shouldShowEliteLevel(e){if(!e)return!1;if(this.isSuperMixPool){const t=e.boxType||e.box_type||"normal";return"normal"===t||"cooperation"===t}return this.selectedBox&&("normal"===this.selectedBox.Box_type||"cooperation"===this.selectedBox.Box_type)},shouldShowEliteLevelInHistory(e){if(!e)return!1;const t=e.boxType||"normal";return"normal"===t||"cooperation"===t},async loadLocalData(){try{const e=t("arknightsData"),l=t("enableGuessData"),i=t("guessData");let r=[];e&&Array.isArray(e)&&e.length>0&&(r=[...e]),"true"===l&&i&&Array.isArray(i)&&i.length>0&&(r=[...r,...i]),r.length>0?(this.characterData=r,this.prepareAvailableBoxes(),this.filterBoxesByType(),this.prepareSuperMixAllCards()):(s({title:"è¯·å…ˆæ›´æ–°å¹²å‘˜æ•°æ®",icon:"none"}),setTimeout((()=>{a()}),1500))}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥:",e),s({title:"æ•°æ®åŠ è½½å¤±è´¥",icon:"none"})}},prepareAvailableBoxes(){this.availableBoxes=this.characterData.map((e=>({...e,displayName:`${e.Box_id} (${this.getBoxTypeText(e.Box_type)})`})))},prepareSuperMixAllCards(){this.superMixAllCards=[];let e=[...this.availableBoxes];this.superMixFilters.excludeAmbience&&(e=e.filter((e=>"ambience"!==e.Box_type))),this.superMixFilters.excludeSpecial&&(e=e.filter((e=>"special"!==e.Box_type))),this.superMixFilters.excludeCooperation&&(e=e.filter((e=>"cooperation"!==e.Box_type))),this.superMixFilters.excludeWhitelist&&(e=e.filter((e=>"whitelist"!==e.Box_type))),this.filteredBoxCount=e.length,e.forEach((e=>{const t=this.getBoxCharacters(e);"whitelist"===e.Box_type||"ambience"===e.Box_type||"special"===e.Box_type?t.forEach((t=>{this.superMixAllCards.push({...t,eliteLevel:1,sourceBox:e.Box_id,boxType:e.Box_type})})):t.forEach((t=>{t.nolyELITE1?this.superMixAllCards.push({...t,eliteLevel:1,sourceBox:e.Box_id,boxType:e.Box_type}):(this.superMixAllCards.push({...t,eliteLevel:1,sourceBox:e.Box_id,boxType:e.Box_type}),this.superMixAllCards.push({...t,eliteLevel:2,sourceBox:e.Box_id,boxType:e.Box_type}))}))})),this.superMixTotalCards=this.superMixAllCards.length,console.log("è¶…çº§å¤§æ··æ± è¿‡æ»¤åå¡ç‰‡æ€»æ•°:",this.superMixTotalCards,"ç›’å­æ•°:",this.filteredBoxCount)},onSuperMixPoolChange(e){this.isSuperMixPool=e.detail.value.length>0,this.isSuperMixPool?(this.selectedBox=null,this.currentResult=null,this.showResult=!1,this.currentBoxPool=[],this.currentIndex=0,this.drawnCards=[],this.prepareSuperMixAllCards()):this.filteredBoxes.length>0&&(this.selectedBox=this.filteredBoxes[this.selectedBoxIndex],this.loadBoxProgress())},onFilterChange(e,t){const s=t.detail.value.length>0,a=`exclude${e.charAt(0).toUpperCase()+e.slice(1)}`;this.superMixFilters[a]=!s,this.isSuperMixPool&&this.prepareSuperMixAllCards()},filterBoxesByType(){this.selectedType?("all"===this.selectedType.value?this.filteredBoxes=[...this.availableBoxes]:this.filteredBoxes=this.availableBoxes.filter((e=>(e.Box_type||"normal")===this.selectedType.value)),this.selectedBoxIndex=0,this.filteredBoxes.length>0?(this.selectedBox=this.filteredBoxes[0],this.loadBoxProgress()):(this.selectedBox=null,this.currentResult=null,this.showResult=!1)):this.filteredBoxes=[]},onTypeChange(e){const t=parseInt(e.detail.value);this.selectedTypeIndex=t,this.selectedType=this.typeOptions[t],this.filterBoxesByType()},onBoxChange(e){const t=parseInt(e.detail.value);this.selectedBoxIndex=t,this.selectedBox=this.filteredBoxes[t],this.currentResult=null,this.showResult=!1,this.loadBoxProgress()},resetCurrentBox(){this.selectedBox&&l({title:"ç¡®è®¤å¼€æ–°ç›’å—",content:"ç¡®å®šå¼€å¯å½“å‰ç›’æ–°ç›’å—ï¼Ÿ",success:e=>{e.confirm&&(this.markBoxEnd(),this.initializeBox(),this.saveBoxProgress(),this.showResult=!1,this.markBoxStart(),s({title:"å¼€æ–°ç›’æˆåŠŸ",icon:"success"}))}})},autoResetCurrentBox(){this.selectedBox&&(this.markBoxEnd(),this.initializeBox(),this.saveBoxProgress(),this.markBoxStart(),s({title:"æœ¬ç›’å·²å…¨éƒ¨æŠ½å–å®Œæ¯•ï¼Œå·²è‡ªåŠ¨å¼€å¯æ–°ç›’",icon:"success",duration:3e3}))},initializeBox(){if(!this.selectedBox)return;const e=this.generateAllCards();this.currentBoxPool=this.shuffleArray([...e]),this.currentIndex=0,this.drawnCards=[]},generateAllCards(){if(!this.selectedBox)return[];const e=this.getBoxCharacters(this.selectedBox),t=[];return this.isNoEliteBox||"special"===this.selectedBox.Box_type?e.forEach((e=>{t.push({...e,eliteLevel:1,boxType:this.selectedBox.Box_type})})):e.forEach((e=>{e.nolyELITE1?t.push({...e,eliteLevel:1,boxType:this.selectedBox.Box_type}):(t.push({...e,eliteLevel:1,boxType:this.selectedBox.Box_type}),t.push({...e,eliteLevel:2,boxType:this.selectedBox.Box_type}))})),t},shuffleArray(e){const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t},loadBoxProgress(){if(!this.selectedBox)return;const e=this.selectedBox.Box_id,s=t(`gacha_progress_${e}`);s&&s.currentBoxPool&&void 0!==s.currentIndex?(this.currentBoxPool=s.currentBoxPool,this.currentIndex=s.currentIndex,this.drawnCards=s.drawnCards||[]):(this.initializeBox(),this.markBoxStart())},saveBoxProgress(){if(!this.selectedBox)return;const e=`gacha_progress_${this.selectedBox.Box_id}`,t={currentBoxPool:this.currentBoxPool,currentIndex:this.currentIndex,drawnCards:this.drawnCards};i(e,t)},async doGacha(){if(!this.isAnimating)if(this.isSuperMixPool)await this.doSuperMixGacha();else{if(!this.selectedBox||this.currentIndex>=this.currentBoxPool.length)return;const e=0===this.currentIndex,t=this.currentIndex===this.currentBoxPool.length-1;this.startGachaAnimation(),await new Promise((e=>setTimeout(e,1500)));const s=this.currentBoxPool[this.currentIndex];this.currentIndex++,this.currentResult=s,this.drawnCards.push(s),this.saveBoxProgress(),this.addToHistory(s,e,t,!1),t&&this.markBoxEnd(),this.endGachaAnimation(),this.currentIndex>=this.currentBoxPool.length&&setTimeout((()=>{this.autoResetCurrentBox()}),1500)}},async doSuperMixGacha(){if(0===this.superMixAllCards.length)return void s({title:"æ²¡æœ‰å¯æŠ½å–çš„å¡ç‰‡ï¼Œè¯·è°ƒæ•´è¿‡æ»¤é€‰é¡¹",icon:"none"});this.startGachaAnimation(),await new Promise((e=>setTimeout(e,1500)));const e=Math.floor(Math.random()*this.superMixAllCards.length),t={...this.superMixAllCards[e]};this.currentResult=t,this.addToHistory(t,!1,!1,!0),this.endGachaAnimation()},startGachaAnimation(){this.isAnimating=!0,this.showResult=!0},endGachaAnimation(){this.isAnimating=!1},markBoxStart(){if(!this.selectedBox)return;const e=this.selectedBox.Box_id;this.boxStartMarkers[e]=!0},markBoxEnd(){if(!this.selectedBox)return;const e=this.selectedBox.Box_id;this.boxEndMarkers[e]=!0},addToHistory(e,t=!1,s=!1,a=!1){const l={character:e,boxId:a?"è¶…çº§å¤§æ··æ± ":this.selectedBox.Box_id,boxType:a?e.boxType:this.selectedBox.Box_type,eliteLevel:e.eliteLevel,time:this.formatTime(new Date),isFirstInBox:t,isLastInBox:s,isSuperMixPool:a};this.gachaHistory.unshift(l),this.gachaHistory.length>100&&(this.gachaHistory=this.gachaHistory.slice(0,100)),this.saveGachaHistory()},getEliteText:e=>1===e?"ç²¾ä¸€":"ç²¾äºŒ",getEliteClass:e=>1===e?"elite-one":"elite-two",loadGachaHistory(){const e=t("gacha_history");e&&Array.isArray(e)&&(this.gachaHistory=e);const s=t("gacha_box_markers");s&&(this.boxStartMarkers=s.startMarkers||{},this.boxEndMarkers=s.endMarkers||{});const a=t("super_mix_filters");a&&(this.superMixFilters=a)},saveGachaHistory(){i("gacha_history",this.gachaHistory);const e={startMarkers:this.boxStartMarkers,endMarkers:this.boxEndMarkers};i("gacha_box_markers",e),i("super_mix_filters",this.superMixFilters)},clearHistory(){l({title:"ç¡®è®¤æ¸…ç©º",content:"ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æŠ½å¡å†å²è®°å½•å—ï¼Ÿ",success:e=>{e.confirm&&(this.gachaHistory=[],this.boxStartMarkers={},this.boxEndMarkers={},r("gacha_history"),r("gacha_box_markers"),s({title:"å†å²è®°å½•å·²æ¸…ç©º",icon:"success"}))}})},shareHistory(){if(0===this.gachaHistory.length)return void s({title:"æš‚æ— æŠ½å¡è®°å½•",icon:"none"});let e="æ–¹èˆŸé€šè¡Œè¯æ¨¡æ‹ŸæŠ½å¡è®°å½•\n";e+=`æ€»æŠ½æ•°: ${this.totalDraws}\n`,e+=`çƒ­é—¨æ¬¡æ•°: ${this.hotDraws}\n`,e+=`æ··æ± æ¬¡æ•°: ${this.superMixDraws}\n`,e+=`æ™®é€šæ¬¡æ•°: ${this.normalDraws}\n`,this.qualifiedDraws>0?(e+=`æ¬§éåº¦: ${this.luckLevel} (${this.luckRatio}%)\n`,e+=`æœ‰æ•ˆç»Ÿè®¡æ¬¡æ•°: ${this.qualifiedDraws}\n\n`):e+="æ¬§éåº¦: æš‚æ— æœ‰æ•ˆè®°å½•\n\n",e+="æœ€è¿‘5æ¬¡æŠ½å¡è®°å½•:\n";this.gachaHistory.slice(0,5).forEach(((t,s)=>{e+=`${s+1}. ${t.character.name} `,t.character.hotcharacter&&(e+="[çƒ­é—¨] "),t.isSuperMixPool?e+=`(æ··æ± ) ${t.time}\n`:e+=`(${t.boxId}) ${t.time}\n`})),e+='å¾®ä¿¡æœç´¢"æ–¹èˆŸé€šè¡Œè¯è°·å­æŸ¥è¯¢å·¥å…·"è·å–æ›´å¤šå“Ÿ~\n',o({data:e,success:()=>{s({title:"è®°å½•å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",icon:"success"})},fail:()=>{s({title:"å¤åˆ¶å¤±è´¥",icon:"none"})}})},formatTime:e=>`${e.getFullYear()}å¹´${(e.getMonth()+1).toString().padStart(2,"0")}æœˆ${e.getDate().toString().padStart(2,"0")}æ—¥ ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`,getBoxCharacters(e){const t=[];for(let s=1;s<=10;s++){const a=`character${s}`;if(e[a]){let s="",l="",i=!1,r=!1;"string"==typeof e[a]?(s=e[a],l="",i="whitelist"===e.Box_type||"ambience"===e.Box_type||"special"===e.Box_type,r=!1):e[a].name&&(s=e[a].name,l=e[a].imageUrl||"",i=!0===e[a].nolyELITE1||"whitelist"===e.Box_type||"ambience"===e.Box_type||"special"===e.Box_type,r=!0===e[a].hotcharacter),s&&s.trim()&&t.push({name:s,avatar:l||this.defaultAvatar,nolyELITE1:i,hotcharacter:r})}}return t},getBoxTypeText:e=>({whitelist:"ç™½åå•å‡­è¯",special:"ç‰¹åˆ«é€šè¡Œè®¤è¯",cooperation:"è”åŠ¨æ¬¾",ambience:"éŸ³å¾‹è”è§‰é€šè¡Œè¯",normal:"å¸¸è§„æ¬¾",mixed:"è¶…çº§å¤§æ··æ± "}[e]||"å¸¸è§„æ¬¾"),onAvatarError(e){e.avatar=this.defaultAvatar}}},[["render",function(e,t,s,a,l,i){const r=A(c("uni-notice-bar"),P),o=h,E=k,I=b,D=C,H=M,L=v,F=w,R=T,$=S;return d(),n(o,{class:"container"},{default:u((()=>[x(o,{class:"header"},{default:u((()=>[x(r,{scrollable:"",single:"",showIcon:"",text:"æ³¨æ„:æœ¬åŠŸèƒ½ä¸ºæ¨¡æ‹ŸæŠ½å¡ï¼Œç»“æœç”±è®¡ç®—æœºè¿ç®—ç”Ÿæˆã€‚è¯¥ç»“æœä¸ç°å®æƒ…å†µæ— å…³è”ï¼Œä»…æä¾›å¨±ä¹ç”¨é€”ï¼Œè¯·å‹¿å°†å…¶ä¸ç°å®åœºæ™¯ç»‘å®šã€‚"})])),_:1}),x(o,{class:"gacha-section"},{default:u((()=>[l.isSuperMixPool?y("",!0):(d(),n(o,{key:0,class:"selector-group"},{default:u((()=>[x(o,{class:"selector-item"},{default:u((()=>[x(E,{class:"selector-label"},{default:u((()=>[p("é€‰æ‹©åˆ†ç±»ï¼š")])),_:1}),x(I,{class:"type-picker",onChange:i.onTypeChange,value:l.selectedTypeIndex,range:l.typeOptions,"range-key":"label"},{default:u((()=>[x(o,{class:"picker-display"},{default:u((()=>[x(E,{class:"picker-text"},{default:u((()=>[p(f(l.selectedType?l.selectedType.label:"è¯·é€‰æ‹©åˆ†ç±»"),1)])),_:1}),x(E,{class:"picker-arrow"},{default:u((()=>[p("â–¼")])),_:1})])),_:1})])),_:1},8,["onChange","value","range"])])),_:1}),x(o,{class:"selector-item"},{default:u((()=>[x(E,{class:"selector-label"},{default:u((()=>[p("é€‰æ‹©ç›’å·ï¼š")])),_:1}),x(I,{class:"box-picker",onChange:i.onBoxChange,value:l.selectedBoxIndex,range:l.filteredBoxes,"range-key":"displayName",disabled:!l.selectedType},{default:u((()=>[x(o,{class:_(["picker-display",{disabled:!l.selectedType}])},{default:u((()=>[x(E,{class:"picker-text"},{default:u((()=>[p(f(l.selectedBox?l.selectedBox.displayName:"è¯·å…ˆé€‰æ‹©åˆ†ç±»"),1)])),_:1}),x(E,{class:"picker-arrow"},{default:u((()=>[p("â–¼")])),_:1})])),_:1},8,["class"])])),_:1},8,["onChange","value","range","disabled"])])),_:1})])),_:1})),x(o,{class:"super-mix-option"},{default:u((()=>[x(o,{class:"checkbox-item"},{default:u((()=>[x(L,{onChange:i.onSuperMixPoolChange},{default:u((()=>[x(H,{class:"checkbox-label"},{default:u((()=>[x(D,{value:1,checked:l.isSuperMixPool,color:"#409EFF"},null,8,["checked"]),x(E,{class:"checkbox-text"},{default:u((()=>[p("è¶… çº§ å¤§ æ·· æ± ")])),_:1})])),_:1})])),_:1},8,["onChange"])])),_:1}),l.isSuperMixPool?(d(),n(o,{key:0,class:"mix-filter-options"},{default:u((()=>[x(o,{class:"filter-title"},{default:u((()=>[p("è¿‡æ»¤é€‰é¡¹ï¼š")])),_:1}),x(o,{class:"filter-grid"},{default:u((()=>[x(o,{class:"filter-item"},{default:u((()=>[x(L,{onChange:t[0]||(t[0]=e=>i.onFilterChange("ambience",e))},{default:u((()=>[x(H,{class:"filter-label"},{default:u((()=>[x(D,{value:1,checked:!l.superMixFilters.excludeAmbience,color:"#67C23A"},null,8,["checked"]),x(E,{class:"filter-text"},{default:u((()=>[p("åŒ…å«éŸ³å¾‹è”è§‰")])),_:1})])),_:1})])),_:1})])),_:1}),x(o,{class:"filter-item"},{default:u((()=>[x(L,{onChange:t[1]||(t[1]=e=>i.onFilterChange("special",e))},{default:u((()=>[x(H,{class:"filter-label"},{default:u((()=>[x(D,{value:1,checked:!l.superMixFilters.excludeSpecial,color:"#E6A23C"},null,8,["checked"]),x(E,{class:"filter-text"},{default:u((()=>[p("åŒ…å«ç‰¹åˆ«é€šè¡Œè¯")])),_:1})])),_:1})])),_:1})])),_:1}),x(o,{class:"filter-item"},{default:u((()=>[x(L,{onChange:t[2]||(t[2]=e=>i.onFilterChange("cooperation",e))},{default:u((()=>[x(H,{class:"filter-label"},{default:u((()=>[x(D,{value:1,checked:!l.superMixFilters.excludeCooperation,color:"#409EFF"},null,8,["checked"]),x(E,{class:"filter-text"},{default:u((()=>[p("åŒ…å«è”åŠ¨æ¬¾")])),_:1})])),_:1})])),_:1})])),_:1}),x(o,{class:"filter-item"},{default:u((()=>[x(L,{onChange:t[3]||(t[3]=e=>i.onFilterChange("whitelist",e))},{default:u((()=>[x(H,{class:"filter-label"},{default:u((()=>[x(D,{value:1,checked:!l.superMixFilters.excludeWhitelist,color:"#F56C6C"},null,8,["checked"]),x(E,{class:"filter-text"},{default:u((()=>[p("åŒ…å«ç™½åå•å‡­è¯")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),x(o,{class:"filter-stats"},{default:u((()=>[x(E,{class:"filter-stat-text"},{default:u((()=>[p("å½“å‰æ··å…¥ç›’æ•°: "+f(l.filteredBoxCount),1)])),_:1}),x(E,{class:"filter-stat-text"},{default:u((()=>[p("å¯ç”¨å¡ç‰‡æ•°: "+f(l.superMixTotalCards),1)])),_:1})])),_:1})])),_:1})):y("",!0),l.isSuperMixPool?(d(),n(o,{key:1,class:"mix-pool-desc"},{default:u((()=>[x(E,{class:"desc-text"},{default:u((()=>[p("ä»æ‰€æœ‰ç›’å·ä¸­éšæœºæŠ½å–ä»»æ„ä¸€å¼ å¡ç‰‡ï¼Œä¸è€ƒè™‘ç›’å·é™åˆ¶")])),_:1})])),_:1})):y("",!0)])),_:1}),l.selectedBox&&!l.isSuperMixPool?(d(),n(o,{key:1,class:"box-controls"},{default:u((()=>[x(o,{class:"box-info"},{default:u((()=>[x(E,{class:"box-type"},{default:u((()=>[p(f(i.getBoxTypeText(l.selectedBox.Box_type)),1)])),_:1}),x(E,{class:"character-count"},{default:u((()=>[p("å‰©ä½™: "+f(i.remainingCount)+"/"+f(i.totalCount),1)])),_:1})])),_:1}),x(F,{class:"reset-btn",onClick:i.resetCurrentBox},{default:u((()=>[p(" å¼€æ–°ç›’ ")])),_:1},8,["onClick"])])),_:1})):y("",!0),l.isSuperMixPool?(d(),n(o,{key:2,class:"mix-pool-info"},{default:u((()=>[x(E,{class:"mix-pool-title"},{default:u((()=>[p("è¶…çº§å¤§æ··æ± æ¨¡å¼")])),_:1}),x(E,{class:"mix-pool-stats"},{default:u((()=>[p("å¯ç”¨å¡ç‰‡æ•°: "+f(l.superMixTotalCards),1)])),_:1})])),_:1})):y("",!0),x(F,{class:"gacha-btn",disabled:!l.selectedBox&&!l.isSuperMixPool||l.selectedBox&&0===i.remainingCount||l.isAnimating,onClick:i.doGacha},{default:u((()=>[p(f(i.gachaButtonText),1)])),_:1},8,["disabled","onClick"]),l.showResult?(d(),n(o,{key:3,class:"gacha-result"},{default:u((()=>[x(o,{class:_(["card-container",{flipping:l.isAnimating}])},{default:u((()=>[l.isAnimating?(d(),n(o,{key:0,class:"card-back"},{default:u((()=>[x(o,{class:"card-back-content"},{default:u((()=>[x(E,{class:"card-back-text"},{default:u((()=>[p("?")])),_:1})])),_:1})])),_:1})):y("",!0),l.isAnimating?y("",!0):(d(),n(o,{key:1,class:_(["result-card",i.getEliteClass(l.currentResult.eliteLevel)])},{default:u((()=>[x(R,{class:"character-avatar",src:l.currentResult.avatar,mode:"aspectFit",onError:t[4]||(t[4]=e=>i.onAvatarError(l.currentResult))},null,8,["src"]),x(E,{class:"character-name"},{default:u((()=>[p(f(l.currentResult.name),1)])),_:1}),i.shouldShowEliteLevel(l.currentResult)?(d(),n(E,{key:0,class:"character-elite"},{default:u((()=>[p(f(i.getEliteText(l.currentResult.eliteLevel)),1)])),_:1})):y("",!0),l.isSuperMixPool?(d(),n(E,{key:1,class:"character-source"},{default:u((()=>[p("æ¥æº: "+f(l.currentResult.sourceBox),1)])),_:1})):y("",!0),l.currentResult.hotcharacter?(d(),n(E,{key:2,class:"hot-tag"},{default:u((()=>[p("çƒ­é—¨")])),_:1})):y("",!0)])),_:1},8,["class"]))])),_:1},8,["class"])])),_:1})):y("",!0),x(F,{class:"history-btn",onClick:t[5]||(t[5]=e=>l.showHistory=!0)},{default:u((()=>[p(" æŸ¥çœ‹æŠ½å¡å†å² ")])),_:1})])),_:1}),l.showHistory?(d(),n(o,{key:0,class:"history-modal"},{default:u((()=>[x(o,{class:"modal-mask",onClick:t[6]||(t[6]=e=>l.showHistory=!1)}),x(o,{class:"modal-content"},{default:u((()=>[x(o,{class:"modal-header"},{default:u((()=>[x(E,{class:"modal-title"},{default:u((()=>[p("æŠ½å¡å†å²&ç»Ÿè®¡")])),_:1}),x(F,{class:"close-btn",onClick:t[7]||(t[7]=e=>l.showHistory=!1)},{default:u((()=>[p("Ã—")])),_:1})])),_:1}),x(o,{class:"stats-panel"},{default:u((()=>[x(o,{class:"stats-section"},{default:u((()=>[x(E,{class:"stats-title"},{default:u((()=>[p("æŠ½å¡ç»Ÿè®¡")])),_:1}),x(o,{class:"stats-grid"},{default:u((()=>[x(o,{class:"stat-item"},{default:u((()=>[x(E,{class:"stat-label"},{default:u((()=>[p("æ€»æŠ½æ•°")])),_:1}),x(E,{class:"stat-value"},{default:u((()=>[p(f(i.totalDraws),1)])),_:1})])),_:1}),x(o,{class:"stat-item"},{default:u((()=>[x(E,{class:"stat-label"},{default:u((()=>[p("çƒ­é—¨æ¬¡æ•°")])),_:1}),x(E,{class:"stat-value"},{default:u((()=>[p(f(i.hotDraws),1)])),_:1})])),_:1}),x(o,{class:"stat-item"},{default:u((()=>[x(E,{class:"stat-label"},{default:u((()=>[p("æ··æ± æ¬¡æ•°")])),_:1}),x(E,{class:"stat-value"},{default:u((()=>[p(f(i.superMixDraws),1)])),_:1})])),_:1}),x(o,{class:"stat-item"},{default:u((()=>[x(E,{class:"stat-label"},{default:u((()=>[p("æ™®é€šæ¬¡æ•°")])),_:1}),x(E,{class:"stat-value"},{default:u((()=>[p(f(i.normalDraws),1)])),_:1})])),_:1})])),_:1})])),_:1}),x(o,{class:"stats-section combined-section"},{default:u((()=>[x(o,{class:"combined-header"},{default:u((()=>[x(o,{class:"luck-section"},{default:u((()=>[x(E,{class:"stats-title"},{default:u((()=>[p("æ¬§éåº¦ç»Ÿè®¡")])),_:1}),i.qualifiedDraws>0?(d(),n(o,{key:0,class:"luck-display"},{default:u((()=>[x(o,{class:"luck-item"},{default:u((()=>[x(E,{class:"luck-label"},{default:u((()=>[p("å½“å‰ç­‰çº§ï¼š")])),_:1}),x(o,{class:_(["luck-value-container",i.getLuckClass(i.luckLevel)])},{default:u((()=>[x(E,{class:"luck-value"},{default:u((()=>[p(f(i.luckLevel)+" ("+f(i.luckRatio)+"%)",1)])),_:1})])),_:1},8,["class"])])),_:1}),x(o,{class:"luck-details"},{default:u((()=>[x(E,{class:"luck-detail-text"},{default:u((()=>[p("ç»Ÿè®¡åŸºæ•°ï¼š"+f(i.qualifiedDraws)+" æ¬¡æœ‰æ•ˆæŠ½å¡",1)])),_:1}),x(E,{class:"luck-detail-text"},{default:u((()=>[p("çƒ­é—¨ç‡ï¼š"+f(i.hotDrawsRate)+"%",1)])),_:1})])),_:1})])),_:1})):(d(),n(o,{key:1,class:"luck-display"},{default:u((()=>[x(E,{class:"no-data-text"},{default:u((()=>[p("æš‚æ— æœ‰æ•ˆè®°å½•")])),_:1}),x(E,{class:"no-data-text"},{default:u((()=>[p("(éŸ³å¾‹è”è§‰ã€ç‰¹åˆ«é€šè¡Œè¯ã€ç™½åå•å‡­è¯ä¸è®¡å…¥)")])),_:1})])),_:1}))])),_:1}),x(o,{class:"action-buttons"},{default:u((()=>[x(F,{class:"share-btn",onClick:i.shareHistory},{default:u((()=>[x(E,{class:"share-icon"},{default:u((()=>[p("ğŸ“¤")])),_:1}),x(E,{class:"button-text"},{default:u((()=>[p("åˆ†äº«è®°å½•")])),_:1})])),_:1},8,["onClick"]),x(F,{class:"clear-btn",onClick:i.clearHistory},{default:u((()=>[x(E,{class:"button-text"},{default:u((()=>[p("æ¸…ç©ºå†å²")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),x($,{class:"history-list","scroll-y":""},{default:u((()=>[(d(!0),B(m,null,g(l.gachaHistory,((e,t)=>(d(),n(o,{key:t,class:"history-item"},{default:u((()=>[x(o,{class:_(["history-card",i.getEliteClass(e.eliteLevel)])},{default:u((()=>[x(o,{class:"history-card-header"},{default:u((()=>[x(E,{class:"history-index"},{default:u((()=>[p("#"+f(t+1),1)])),_:2},1024),e.isSuperMixPool?(d(),n(E,{key:0,class:"history-mode-tag"},{default:u((()=>[p("æ··æ± ")])),_:1})):y("",!0),e.isFirstInBox?(d(),n(E,{key:1,class:"history-first-tag"},{default:u((()=>[p("é¦–æŠ½")])),_:1})):y("",!0),e.isLastInBox?(d(),n(E,{key:2,class:"history-last-tag"},{default:u((()=>[p("å°¾æŠ½")])),_:1})):y("",!0),e.character.hotcharacter?(d(),n(E,{key:3,class:"history-hot-tag"},{default:u((()=>[p("çƒ­é—¨")])),_:1})):y("",!0),i.isExcludedFromStats(e)?(d(),n(E,{key:4,class:"history-exclude-tag"},{default:u((()=>[p("ä¸è®¡ç»Ÿè®¡")])),_:1})):y("",!0)])),_:2},1024),x(R,{class:"history-avatar",src:e.character.avatar,mode:"aspectFit"},null,8,["src"]),x(o,{class:"history-info"},{default:u((()=>[x(E,{class:"history-name"},{default:u((()=>[p(f(e.character.name),1)])),_:2},1024),e.isSuperMixPool?(d(),n(E,{key:0,class:"history-box"},{default:u((()=>[p("æ¥æº: æ··æ± ")])),_:1})):(d(),n(E,{key:1,class:"history-box"},{default:u((()=>[p("ç›’å·: "+f(e.boxId),1)])),_:2},1024)),i.shouldShowEliteLevelInHistory(e)?(d(),n(E,{key:2,class:"history-elite"},{default:u((()=>[p(f(i.getEliteText(e.eliteLevel)),1)])),_:2},1024)):y("",!0),x(E,{class:"history-time"},{default:u((()=>[p(f(e.time),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)))),128)),0===l.gachaHistory.length?(d(),n(o,{key:0,class:"empty-history"},{default:u((()=>[x(E,null,{default:u((()=>[p("æš‚æ— æŠ½å¡è®°å½•")])),_:1})])),_:1})):y("",!0)])),_:1})])),_:1})])),_:1})):y("",!0)])),_:1})}],["__scopeId","data-v-60f9caea"]]);export{I as default};
