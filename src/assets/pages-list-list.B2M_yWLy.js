import{H as t,r as a,n as e,g as s,s as r,b as o,l as i,w as l,m as c,o as n,p as d,t as h,u,y as g,z as f,A as p,F as m,q as _,x,B as C,I as v,D as y,C as B,J as k}from"./index-BFyEvU8g.js";import{_ as S}from"./hot.ChjTii81.js";import{_ as I}from"./empty-icon.8qvP3JRT.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T={clientId:"21680db9b1362913357c",baseUrl:"https://21680db9b1362913357c.myminapp.com/hserve/v2.2",tableNames:{Version:"Version"}};const U=b({data:()=>({characterData:[],filteredData:[],currentPage:1,pageSize:5,dataStatusMessage:"",cloudUpdateTime:"",localUpdateTime:"",currentVersion:"",dataUrl:"",defaultAvatar:"/static/default-avatar.png",avatarCache:{},filterIndex:0,filterOptions:["全部盒类型","常规款","白名单凭证","特别通行认证","联动款","音律联觉通行证"],filterMap:{0:"all",1:"normal",2:"whitelist",3:"special",4:"cooperation",5:"ambience"},sortIndex:0,sortOrder:"asc",sortOptions:["按盒号排序","按干员数量排序"],favoriteBoxIds:[],favoriteCharacterNames:[],showBoxCharactersModal:!1,currentBoxId:"",modalBoxCharacters:[],retryCount:0,latestVersion:""}),computed:{totalPages(){return Math.ceil(this.filteredData.length/this.pageSize)},currentPageData(){const t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return this.filteredData.slice(t,a)},currentFilter(){return this.filterMap[this.filterIndex]||"all"},isAllSelected(){return 0!==this.modalBoxCharacters.length&&this.modalBoxCharacters.every((t=>this.isFavoriteCharacter(t.name)))}},watch:{filterIndex(){this.applyFilterAndSort()},sortIndex(){this.applyFilterAndSort()},sortOrder(){this.applyFilterAndSort()}},onLoad(){t({title:"明日方舟通行证列表工具"}),console.log("盒号列表页面加载，开始初始化数据..."),this.loadLocalData(),this.loadFavorites()},onShow(){this.loadFavorites()},onShareAppMessage:()=>({title:"方舟通行证谷子查询工具-通行证盒号列表",path:"/pages/list/list",imageUrl:""}),onShareTimeline:()=>({title:"方舟通行证谷子查询工具-通行证盒号列表",imageUrl:""}),methods:{async knowCloudRequest(t,e={},s=0){if(s>3)throw console.error("知晓云请求重试次数过多"),new Error("知晓云请求重试次数过多");try{const s=T.tableNames[t];if(!s)throw new Error(`未找到表 ${t} 的配置`);let r=`${T.baseUrl}/table/${s}/record/`;if(e.data){const t=[];Object.keys(e.data).forEach((a=>{t.push(`${a}=${encodeURIComponent(e.data[a])}`)})),t.length>0&&(r+=`?${t.join("&")}`)}const o={url:r,method:e.method||"GET",header:{"X-Hydrogen-Client-ID":T.clientId,"Content-Type":"application/json"},timeout:15e3,...e};e.header&&Object.assign(o.header,e.header),console.log("发送知晓云请求:",o.url);const i=await a(o);if(console.log("知晓云响应状态:",i.statusCode),200===i.statusCode)return i.data;throw console.error("知晓云请求错误:",i.statusCode,i.data),new Error(`请求失败: ${i.statusCode}`)}catch(r){if(console.error(`知晓云请求失败 (${t}):`,r),s<3)return console.log(`第${s+1}次重试...`),await this.knowCloudRequest(t,e,s+1);throw r}},async getDataUrlFromMinapp(){try{const t=await this.knowCloudRequest("Version",{data:{limit:1,offset:0}});if(console.log("知晓云版本信息响应:",t),t&&t.objects&&t.objects.length>0){const a=t.objects[0];return console.log("版本数据:",a),{url:a.url||"",version:a.version||a.Version||"",cloudUpdateTime:a.updated_at||a.created_at||""}}throw console.error("知晓云返回数据格式不正确:",t),new Error("未找到版本数据或数据格式不正确")}catch(t){throw console.error("从知晓云获取URL失败:",t),t}},goToBoxInfo(t){e({url:`/pages/box_info/box_info?boxId=${t}`})},formatCloudTime(t){if(!t)return"";try{const a=new Date(t);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`}catch(a){return console.error("格式化云端时间失败:",a),t}},async loadLocalData(){try{const t=s("arknightsData"),a=s("localUpdateTime"),e=s("cloudUpdateTime"),r=s("dataVersion"),o=s("dataUrl"),i=s("enableGuessData"),l=s("guessData");let c=[];t&&Array.isArray(t)&&t.length>0&&(c=[...t],this.dataStatusMessage=`已加载本地数据 (${t.length} 个盒号)`),"true"===i&&l&&Array.isArray(l)&&l.length>0&&(c=[...c,...l],this.dataStatusMessage+=` + 预测数据 (${l.length} 个盒号)`),c.length>0?(this.characterData=c,this.applyFilterAndSort(),this.localUpdateTime=a||"",this.cloudUpdateTime=e||"",this.currentVersion=r||"",this.dataUrl=o||"",this.currentVersion?setTimeout((()=>{this.checkForUpdates()}),1e3):this.checkForUpdates()):(this.dataStatusMessage="正在获取数据信息...",this.checkForUpdates())}catch(t){console.error("加载本地数据失败:",t),this.dataStatusMessage="加载本地数据失败，正在尝试获取最新数据...",this.checkForUpdates()}},async checkForUpdates(){try{this.dataStatusMessage="正在检查更新...";const t=await this.getDataUrlFromMinapp();console.log("获取到的版本信息:",t),this.dataUrl=t.url,this.cloudUpdateTime=t.cloudUpdateTime,this.latestVersion=t.version,r("cloudUpdateTime",this.cloudUpdateTime);const a=s("dataVersion");console.log("本地版本:",a,"云端版本:",this.latestVersion),a&&a===this.latestVersion?(this.currentVersion=a,this.dataStatusMessage=`数据已是最新版本 (${this.currentVersion})`,0===this.characterData.length&&this.loadData()):(this.dataStatusMessage=`发现新版本数据 (${this.latestVersion})，正在下载...`,this.loadData())}catch(t){console.error("检查更新失败:",t),this.dataStatusMessage="检查更新失败，使用备用URL",this.dataUrl="https://raw.gitcode.com/huangjinzhou1/ArknightsAuthorization_Series/raw/main/Box_Id.json",this.currentVersion||(this.currentVersion="未知版本"),0===this.characterData.length&&this.loadData()}},async loadData(){if(!this.latestVersion)try{const t=await this.getDataUrlFromMinapp();this.dataUrl=t.url,this.latestVersion=t.version,this.cloudUpdateTime=t.cloudUpdateTime||this.cloudUpdateTime}catch(t){console.error("获取数据URL失败:",t),this.dataUrl="https://raw.gitcode.com/huangjinzhou1/ArknightsAuthorization_Series/raw/main/Box_Id.json",this.latestVersion=this.latestVersion||"未知版本"}this.dataUrl||(this.dataUrl="https://raw.gitcode.com/huangjinzhou1/ArknightsAuthorization_Series/raw/main/Box_Id.json"),this.dataStatusMessage="正在下载干员数据...",a({url:this.dataUrl,method:"GET",timeout:15e3,success:t=>{var a,e;if(200===t.statusCode){let r=t.data;if("string"==typeof r)try{r=JSON.parse(r)}catch(s){return console.error("JSON解析失败:",s),void(this.dataStatusMessage="数据格式错误")}Array.isArray(r)?(console.log("原始数据类型:",typeof r),console.log("原始数据第一个元素:",r[0]),console.log("Box_info 原始类型:",typeof(null==(a=r[0])?void 0:a.Box_info)),console.log("Box_info 原始值:",null==(e=r[0])?void 0:e.Box_info),this.validateDataStructure(r),this.saveDataWithValidation(r)):this.dataStatusMessage="数据格式不正确"}else this.dataStatusMessage=`服务器错误: ${t.statusCode}`},fail:t=>{console.error("下载数据失败:",t),this.dataStatusMessage="下载失败，请检查网络连接"}})},validateDataStructure(t){if(!Array.isArray(t))return void console.error("数据不是数组");const a=t[0];a?(console.log("=== 数据结构验证 ==="),console.log("Box_id:",a.Box_id),console.log("Box_info 类型:",typeof a.Box_info),console.log("Box_info 值:",a.Box_info),console.log("Box_ImageUrl:",a.Box_ImageUrl),console.log("character1 类型:",typeof a.character1),console.log("character1 值:",a.character1),console.log("=== 验证结束 ===")):console.error("数据为空")},saveDataWithValidation(t){var a,e,o;try{console.log("尝试方法1：直接存储原始数据"),r("arknightsData",t);const i=s("arknightsData");if(console.log("存储后验证 - 数据类型:",typeof i),console.log("存储后验证 - 第一个元素:",i[0]),console.log("存储后验证 - Box_info 类型:",typeof(null==(a=i[0])?void 0:a.Box_info)),console.log("存储后验证 - Box_info 值:",null==(e=i[0])?void 0:e.Box_info),!i||!Array.isArray(i)||"string"==typeof(null==(o=i[0])?void 0:o.Box_info))return console.log("方法1失败，尝试方法2：字符串存储"),void this.saveDataAsString(t);this.characterData=i,this.applyFilterAndSort(),this.updateLocalInfo(),this.dataStatusMessage=`数据加载成功 (${i.length} 个盒号)`}catch(i){console.error("数据存储失败:",i),this.dataStatusMessage="数据存储失败"}},saveDataAsString(t){var a,e;try{console.log("使用字符串方式存储数据");const o=JSON.stringify(t);r("arknightsDataString",o);const i=s("arknightsDataString");if(i){const t=JSON.parse(i);console.log("字符串存储验证 - Box_info 类型:",typeof(null==(a=t[0])?void 0:a.Box_info)),console.log("字符串存储验证 - Box_info 值:",null==(e=t[0])?void 0:e.Box_info),this.characterData=t,this.applyFilterAndSort(),this.updateLocalInfo(),this.dataStatusMessage=`数据加载成功 (${t.length} 个盒号)`}}catch(o){console.error("字符串存储失败:",o),this.dataStatusMessage="数据存储失败"}},updateLocalInfo(){const t=new Date;this.localUpdateTime=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`,this.currentVersion=this.latestVersion||this.currentVersion||"未知版本",r("localUpdateTime",this.localUpdateTime),r("cloudUpdateTime",this.cloudUpdateTime),r("dataVersion",this.currentVersion),r("dataUrl",this.dataUrl)},getBoxCharacters(t){const a=[];for(let e=1;e<=10;e++){const s=`character${e}`;if(t[s]){let e="",r="",o=!1,i=!1,l=null;"string"==typeof t[s]?(e=t[s],r="",o=!1,i=!1,l=null):t[s].name&&(e=t[s].name,r=t[s].imageUrl||"",o=!0===t[s].nolyELITE1,i=!0===t[s].hotcharacter,l=t[s].market_price||null),e&&e.trim()&&a.push({name:e,avatar:r||this.defaultAvatar,nolyELITE1:o,hotcharacter:i,market_price:l})}}return a},onAvatarLoad(t,a){console.log(`头像加载成功: 盒${t}干员${a}`);const e=`${t}_${a}`;this.$set(this.avatarCache,e,!0)},onAvatarError(t,a){console.error(`头像加载失败: 盒${t}干员${a}`);const e=`${t}_${a}`;this.$set(this.avatarCache,e,!1)},onModalAvatarError(t){this.$set(this.modalBoxCharacters[t],"avatar",this.defaultAvatar)},onFilterChange(t){this.filterIndex=parseInt(t.detail.value),this.currentPage=1},applyFilterAndSort(){let t=[...this.characterData];"all"!==this.currentFilter&&(t=t.filter((t=>{const a=t.Box_type||"normal";return"normal"===this.currentFilter?!a||"normal"===a:a===this.currentFilter}))),0===this.sortIndex?t.sort(((t,a)=>{const e=t.Box_id||"",s=a.Box_id||"",r=t.Box_type||"normal",o=a.Box_type||"normal";return"asc"===this.sortOrder?this.compareBoxes(r,e,o,s):this.compareBoxes(o,s,r,e)})):1===this.sortIndex&&t.sort(((t,a)=>{const e=this.getCharacterCount(t),s=this.getCharacterCount(a);return"asc"===this.sortOrder?e-s:s-e})),this.filteredData=t},compareBoxes(t,a,e,s){const r=this.getBoxTypePriority(t),o=this.getBoxTypePriority(e);return r!==o?r-o:"normal"===t?this.compareNormalBoxIds(a,s):a.localeCompare(s,"zh-CN")},compareNormalBoxIds(t,a){return this.extractNumberFromId(t)-this.extractNumberFromId(a)},extractNumberFromId(t){const a=t.match(/(\d+(?:\.\d+)?)/);return a?parseFloat(a[1]):0},getCharacterCount(t){let a=0;for(let e=1;e<=10;e++){const s=`character${e}`;if(t[s]){let e="";"string"==typeof t[s]?e=t[s]:t[s].name&&(e=t[s].name),e&&e.trim()&&a++}}return a},getBoxTypePriority:t=>({normal:1,whitelist:2,special:3,cooperation:4,ambience:5}[t]||999),onSortChange(t){this.sortIndex=parseInt(t.detail.value)},toggleSortOrder(){this.sortOrder="asc"===this.sortOrder?"desc":"asc"},getBoxTypeText:t=>({whitelist:"白名单凭证",special:"特别通行认证",cooperation:"联动款",ambience:"音律联觉通行证",normal:"常规款"}[t]||"常规款"),getBoxTypeClass:t=>({whitelist:"type-whitelist",special:"type-special",cooperation:"type-cooperation",ambience:"type-ambience",normal:"type-normal"}[t]||"type-normal"),loadFavorites(){try{this.favoriteBoxIds=s("favoriteBoxIds")||[],this.favoriteCharacterNames=s("favoriteCharacterNames")||[],console.log("已收藏的盒号:",this.favoriteBoxIds),console.log("已收藏的干员:",this.favoriteCharacterNames)}catch(t){console.error("加载收藏数据失败:",t),this.favoriteBoxIds=[],this.favoriteCharacterNames=[]}},toggleFavorite(t){try{const a=this.favoriteBoxIds.indexOf(t);a>-1?(this.favoriteBoxIds.splice(a,1),o({title:"已取消收藏",icon:"success"})):(this.favoriteBoxIds.push(t),o({title:"收藏成功",icon:"success"})),r("favoriteBoxIds",this.favoriteBoxIds),this.$forceUpdate()}catch(a){console.error("操作收藏失败:",a),o({title:"操作失败",icon:"none"})}},isFavorite(t){return this.favoriteBoxIds.includes(t)},toggleFavoriteCharacter(t){try{const a=this.favoriteCharacterNames.indexOf(t);a>-1?(this.favoriteCharacterNames.splice(a,1),o({title:"已取消收藏",icon:"success"})):(this.favoriteCharacterNames.push(t),o({title:"收藏成功",icon:"success"})),r("favoriteCharacterNames",this.favoriteCharacterNames),this.$forceUpdate()}catch(a){o({title:"操作失败",icon:"none"})}},toggleFavoriteCharacterDirectly(t){this.toggleFavoriteCharacter(t)},isFavoriteCharacter(t){return this.favoriteCharacterNames.includes(t)},selectAllCharacters(){this.isAllSelected?(this.modalBoxCharacters.forEach((t=>{const a=this.favoriteCharacterNames.indexOf(t.name);a>-1&&this.favoriteCharacterNames.splice(a,1)})),o({title:"已取消全选",icon:"success"})):(this.modalBoxCharacters.forEach((t=>{this.favoriteCharacterNames.includes(t.name)||this.favoriteCharacterNames.push(t.name)})),o({title:"已全选",icon:"success"})),r("favoriteCharacterNames",this.favoriteCharacterNames),this.$forceUpdate()},openBoxCharactersModal(t,a){this.showBoxCharactersModal=!0,this.currentBoxId=t,this.modalBoxCharacters=a},hideBoxCharactersModal(){this.showBoxCharactersModal=!1,this.currentBoxId="",this.modalBoxCharacters=[]},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},goToFirstPage(){this.currentPage=1},goToLastPage(){this.currentPage=this.totalPages}}},[["render",function(t,a,e,s,r,o){const b=C,T=c,U=v,F=y,D=B,M=k;return n(),i(T,{class:"container"},{default:l((()=>[d(T,{class:"control-section"},{default:l((()=>[d(T,{class:"filter-section"},{default:l((()=>[d(b,{class:"section-title"},{default:l((()=>[h("盒类型筛选：")])),_:1}),d(T,{class:"filter-controls"},{default:l((()=>[d(U,{class:"filter-picker",onChange:o.onFilterChange,value:r.filterIndex,range:r.filterOptions},{default:l((()=>[d(T,{class:"picker-text"},{default:l((()=>[h(u(r.filterOptions[r.filterIndex]),1)])),_:1})])),_:1},8,["onChange","value","range"])])),_:1})])),_:1}),d(T,{class:"sort-section"},{default:l((()=>[d(b,{class:"section-title"},{default:l((()=>[h("排序方式：")])),_:1}),d(T,{class:"sort-controls"},{default:l((()=>[d(U,{class:"sort-picker",onChange:o.onSortChange,value:r.sortIndex,range:r.sortOptions},{default:l((()=>[d(T,{class:"picker-text"},{default:l((()=>[h(u(r.sortOptions[r.sortIndex]),1)])),_:1})])),_:1},8,["onChange","value","range"]),d(F,{class:"sort-order-btn",onClick:o.toggleSortOrder},{default:l((()=>[h(u("asc"===r.sortOrder?"升序 ↑":"降序 ↓"),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),d(T,{class:"pagination-section"},{default:l((()=>[d(T,{class:"pagination-info"},{default:l((()=>[d(b,{class:"page-text"},{default:l((()=>[h("第 "+u(r.currentPage)+" 页 / 共 "+u(o.totalPages)+" 页",1)])),_:1}),d(b,{class:"data-count"},{default:l((()=>[h("共 "+u(r.filteredData.length)+" 盒 (筛选后)",1)])),_:1})])),_:1}),d(T,{class:"pagination-controls"},{default:l((()=>[d(F,{class:"page-btn",disabled:r.currentPage<=1,onClick:o.goToFirstPage},{default:l((()=>[h(" 首页 ")])),_:1},8,["disabled","onClick"]),d(F,{class:"page-btn",disabled:r.currentPage<=1,onClick:o.prevPage},{default:l((()=>[h(" 上一页 ")])),_:1},8,["disabled","onClick"]),d(F,{class:"page-btn",disabled:r.currentPage>=o.totalPages,onClick:o.nextPage},{default:l((()=>[h(" 下一页 ")])),_:1},8,["disabled","onClick"]),d(F,{class:"page-btn",disabled:r.currentPage>=o.totalPages,onClick:o.goToLastPage},{default:l((()=>[h(" 尾页 ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1}),r.dataStatusMessage?(n(),i(T,{key:0,class:"data-status"},{default:l((()=>[d(b,null,{default:l((()=>[h(u(r.dataStatusMessage),1)])),_:1}),r.dataStatusMessage&&(r.dataStatusMessage.includes("失败")||r.dataStatusMessage.includes("错误"))?(n(),i(F,{key:0,class:"update-btn small",onClick:o.loadData},{default:l((()=>[h(" 重试加载 ")])),_:1},8,["onClick"])):g("",!0)])),_:1})):g("",!0),o.currentPageData.length>0?(n(),i(T,{key:1,class:"boxes-list"},{default:l((()=>[(n(!0),f(m,null,p(o.currentPageData,((t,a)=>(n(),i(T,{class:"box-item",key:a},{default:l((()=>[d(T,{class:"box-header"},{default:l((()=>[d(T,{class:"box-header-left"},{default:l((()=>[d(b,{class:"box-id"},{default:l((()=>[h("盒号 "+u(t.Box_id),1)])),_:2},1024),d(b,{class:x(["box-type",o.getBoxTypeClass(t.Box_type)])},{default:l((()=>[h(u(o.getBoxTypeText(t.Box_type)),1)])),_:2},1032,["class"])])),_:2},1024),d(T,{class:"box-header-right"},{default:l((()=>[d(F,{class:"favorite-characters-btn",onClick:a=>o.openBoxCharactersModal(t.Box_id,o.getBoxCharacters(t))},{default:l((()=>[h(" 收藏 ")])),_:2},1032,["onClick"]),d(F,{class:"view-info-btn",onClick:a=>o.goToBoxInfo(t.Box_id)},{default:l((()=>[h(" 本盒信息 ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),d(T,{class:"characters-grid"},{default:l((()=>[(n(!0),f(m,null,p(o.getBoxCharacters(t),((a,e)=>(n(),i(T,{class:"character-card",key:e,onClick:t=>o.toggleFavoriteCharacterDirectly(a.name)},{default:l((()=>[d(T,{class:"character-avatar-container"},{default:l((()=>[d(D,{class:"character-avatar",src:a.avatar,mode:"aspectFit",onError:a=>o.onAvatarError(t.Box_id,e),onLoad:a=>o.onAvatarLoad(t.Box_id,e)},null,8,["src","onError","onLoad"]),a.hotcharacter?(n(),i(D,{key:0,class:"hot-character-icon",src:S,mode:"aspectFit"})):g("",!0),d(T,{class:x(["favorite-indicator",o.isFavoriteCharacter(a.name)?"favorited":""])},{default:l((()=>[h(u(o.isFavoriteCharacter(a.name)?"★":"☆"),1)])),_:2},1032,["class"])])),_:2},1024),d(T,{class:"character-info"},{default:l((()=>[d(T,{class:"character-name-line"},{default:l((()=>[d(b,{class:"character-name"},{default:l((()=>[h(u(a.name),1)])),_:2},1024),a.nolyELITE1?(n(),i(b,{key:0,class:"elite-tag"},{default:l((()=>[h("仅精一")])),_:1})):g("",!0)])),_:2},1024),a.market_price?(n(),i(T,{key:0,class:"market-price-tags"},{default:l((()=>[a.market_price.ELITE1?(n(),i(b,{key:0,class:"price-tag elite1-tag"},{default:l((()=>[h(" 精一 "+u(a.market_price.ELITE1)+"元 ",1)])),_:2},1024)):g("",!0),a.market_price.ELITE2&&!a.nolyELITE1?(n(),i(b,{key:1,class:"price-tag elite2-tag"},{default:l((()=>[h(" 精二 "+u(a.market_price.ELITE2)+"元 ",1)])),_:2},1024)):g("",!0)])),_:2},1024)):g("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):g("",!0),0!==r.filteredData.length||r.dataStatusMessage.includes("正在")?g("",!0):(n(),i(T,{key:2,class:"empty-state"},{default:l((()=>[d(D,{class:"empty-icon",src:I}),d(b,{class:"empty-text"},{default:l((()=>[h("暂无数据")])),_:1}),d(F,{class:"update-btn",onClick:o.loadData},{default:l((()=>[h("加载数据")])),_:1},8,["onClick"])])),_:1})),d(T,{class:"footer"},{default:l((()=>[r.localUpdateTime?(n(),i(b,{key:0,class:"update-info"},{default:l((()=>[h("本地上次更新: "+u(r.localUpdateTime),1)])),_:1})):g("",!0),r.cloudUpdateTime?(n(),i(b,{key:1,class:"update-info"},{default:l((()=>[h("云端最新更新: "+u(o.formatCloudTime(r.cloudUpdateTime)),1)])),_:1})):g("",!0),r.currentVersion?(n(),i(b,{key:2,class:"version-info"},{default:l((()=>[h("数据版本: "+u(r.currentVersion),1)])),_:1})):g("",!0)])),_:1}),r.showBoxCharactersModal?(n(),i(T,{key:3,class:"image-modal",onClick:o.hideBoxCharactersModal},{default:l((()=>[d(T,{class:"image-modal-content",onClick:a[1]||(a[1]=_((()=>{}),["stop"]))},{default:l((()=>[d(T,{class:"image-modal-header"},{default:l((()=>[d(b,{class:"image-modal-title"},{default:l((()=>[h("收藏盒号 "+u(r.currentBoxId)+" 内的干员",1)])),_:1}),d(F,{class:"close-btn",onClick:o.hideBoxCharactersModal},{default:l((()=>[h("×")])),_:1},8,["onClick"])])),_:1}),d(M,{class:"image-container","scroll-y":""},{default:l((()=>[d(T,{class:"box-characters-list"},{default:l((()=>[(n(!0),f(m,null,p(r.modalBoxCharacters,((t,a)=>(n(),i(T,{class:"box-character-item",key:a},{default:l((()=>[d(T,{class:"box-character-info"},{default:l((()=>[d(T,{class:"character-avatar-container"},{default:l((()=>[d(D,{class:"character-avatar",src:t.avatar,mode:"aspectFit",onError:t=>o.onModalAvatarError(a)},null,8,["src","onError"]),t.hotcharacter?(n(),i(D,{key:0,class:"hot-character-icon",src:S,mode:"aspectFit"})):g("",!0)])),_:2},1024),d(T,{class:"character-details"},{default:l((()=>[d(T,{class:"character-name-line"},{default:l((()=>[d(b,{class:"character-name"},{default:l((()=>[h(u(t.name),1)])),_:2},1024),t.nolyELITE1?(n(),i(b,{key:0,class:"elite-tag"},{default:l((()=>[h("仅精一")])),_:1})):g("",!0)])),_:2},1024),t.market_price?(n(),i(T,{key:0,class:"market-price-tags"},{default:l((()=>[t.market_price.ELITE1?(n(),i(b,{key:0,class:"price-tag elite1-tag"},{default:l((()=>[h(" 精一 "+u(t.market_price.ELITE1)+"元 ",1)])),_:2},1024)):g("",!0),t.market_price.ELITE2&&!t.nolyELITE1?(n(),i(b,{key:1,class:"price-tag elite2-tag"},{default:l((()=>[h(" 精二 "+u(t.market_price.ELITE2)+"元 ",1)])),_:2},1024)):g("",!0)])),_:2},1024)):g("",!0)])),_:2},1024)])),_:2},1024),d(F,{class:x(["favorite-btn",o.isFavoriteCharacter(t.name)?"favorited":""]),onClick:a=>o.toggleFavoriteCharacter(t.name)},{default:l((()=>[h(u(o.isFavoriteCharacter(t.name)?"已收藏":"收藏"),1)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),d(T,{class:"image-modal-footer"},{default:l((()=>[d(T,{class:"modal-footer-actions"},{default:l((()=>[d(F,{class:"select-all-btn",onClick:_(o.selectAllCharacters,["stop"])},{default:l((()=>[h(u(o.isAllSelected?"取消全选":"全选"),1)])),_:1},8,["onClick"]),d(F,{class:x(["favorite-box-btn",o.isFavorite(r.currentBoxId)?"favorited":""]),onClick:a[0]||(a[0]=_((t=>o.toggleFavorite(r.currentBoxId)),["stop"]))},{default:l((()=>[h(u(o.isFavorite(r.currentBoxId)?"已收藏本盒":"收藏本盒"),1)])),_:1},8,["class"])])),_:1}),d(b,{class:"image-tip"},{default:l((()=>[h("点击干员右侧的收藏按钮进行收藏")])),_:1})])),_:1})])),_:1})])),_:1},8,["onClick"])):g("",!0)])),_:1})}],["__scopeId","data-v-5e1adbd0"]]);export{U as default};
